{"version":3,"sources":["app/models/pagination.ts","app/util/util.ts","features/basket/basketSlice.ts","features/account/accountSlice.ts","features/catalog/catalogSlice.ts","features/contact/CounterSlice.ts","app/store/configureStore.ts","app/api/history.ts","app/api/agent.ts","features/about/AboutPage.tsx","app/components/AppPagination.tsx","app/components/CheckBoxGroup.tsx","app/components/RadioButtonGroup.tsx","app/layout/Loading.tsx","features/catalog/ProductCard.tsx","features/catalog/ProductCardSkeleton.tsx","features/catalog/ProductList.tsx","features/catalog/ProductSearch.tsx","features/catalog/catalog.tsx","app/errors/NotFound.tsx","features/catalog/ProductDetails.tsx","features/contact/Contact.tsx","app/layout/SignedInMenu.tsx","app/layout/Header.tsx","app/errors/ServerError.tsx","features/basket/BasketSummary.tsx","features/basket/BasketTable.tsx","features/basket/BasketTableSM.tsx","features/basket/BasketPage.tsx","app/components/AppTextInput.tsx","app/components/AppCheckbox.tsx","features/checkout/AddressForm.tsx","features/checkout/StripeInput.tsx","features/checkout/PaymentForm.tsx","features/checkout/Review.tsx","features/checkout/checkoutValidation.ts","features/checkout/CheckoutPage.tsx","features/checkout/CheckoutWrapper.tsx","features/account/Register.tsx","features/account/Login.tsx","app/layout/PrivateRoute.tsx","features/Orders/OrderDetails.tsx","features/Orders/Orders.tsx","features/home/HomePageCarousel.tsx","app/layout/App.tsx","reportWebVitals.ts","app/api/HistoryRouter.tsx","index.tsx"],"names":["PaginatedResponse","items","metaData","this","formatCurrency","amount","isPrice","convertPrice","toFixed","fetchBasketAsync","createAsyncThunk","_","thunkAPI","a","agent","Basket","get","rejectWithValue","error","data","condition","key","b","document","cookie","match","pop","getCookie","addBasketItemAsync","productId","quantity","addItem","removeBasketItemAsync","removeItem","basketSlice","createSlice","name","initialState","basket","status","reducers","setBasket","state","action","payload","clearBasket","extraReducers","builder","addCase","pending","console","log","meta","arg","fulfilled","itemIndex","findIndex","i","undefined","splice","rejected","addMatcher","isAnyOf","actions","signInUser","Account","login","userDto","user","dispatch","localStorage","setItem","JSON","stringify","fetchCurrentUser","setUser","parse","getItem","currentUser","accountSlice","isSessionExpired","redirectUrl","signOut","setURL","toast","productsAdapter","createEntityAdapter","getAxiosParams","productParam","params","URLSearchParams","append","pageNumber","toString","pageSize","orderBy","searchTerm","brands","length","types","fetchProductsAsync","getState","catalog","productParams","Catalog","list","response","setMetaData","fetchProductAsync","details","fetchFiltersAsync","fetchFilters","catalogSlice","getInitialState","productsLoaded","filtersLoaded","setProductParams","setPageNumber","resetProductParams","setAll","upsertOne","productSelectors","getSelectors","counterSlice","title","increment","decrement","store","configureStore","reducer","counter","account","useAppDispatch","useDispatch","useAppSelector","useSelector","myHistory","createBrowserHistory","window","axios","defaults","baseURL","process","withCredentials","responseBody","interceptors","request","use","config","token","headers","Authorization","pagination","errors","modelStateErrors","push","flat","replace","Promise","reject","requests","url","then","post","body","put","delete","id","TestErrors","get400Error","get401Error","get404Error","getValidationError","get500Error","values","register","fetchAddress","Orders","fetch","create","Payments","createPaymentIntent","AboutPage","useState","validationErrors","setValidationError","Container","Typography","gutterBottom","variant","ButtonGroup","fullWidth","Button","onClick","catch","Alert","severity","AlertTitle","List","map","ListItem","ListItemText","AppPagination","onPageChange","currentPage","totalCount","totalPage","Box","display","justifyContent","alignContent","Pagination","count","color","size","page","onChange","event","CheckBoxGroup","checked","checkedItems","setCheckedItems","FormControl","component","FormGroup","item","FormControlLabel","control","Checkbox","indexOf","value","newChecked","filter","x","handleChecked","label","RadioButtonGroup","options","selectedValue","RadioGroup","Radio","Loading","message","Backdrop","open","invisible","alignItems","height","CircularProgress","sx","position","top","ProductCard","product","Card","CardHeader","avatar","Avatar","bgcolor","charAt","toUpperCase","titleTypographyProps","fontWeight","CardMedia","backgroundSize","image","pictureUrl","CardContent","price","brand","type","CardActions","LoadingButton","loading","includes","Link","to","ProductCardSkeleton","Grid","xs","Skeleton","animation","width","style","marginBottom","ProductList","products","container","spacing","sm","md","ProductSearch","isFilterIcon","showFilters","setIsFilterIcon","setShowFilters","setSearchTerm","debouncedSearch","debounce","target","TextField","FilterAlt","sortOptions","selectAll","useEffect","handleScreenResize","useCallback","dimensions","innerWidth","innerHeight","addEventListener","removeEventListener","columnSpacing","Paper","mb","p","NotFound","Divider","ProductDetails","productStatus","useParams","selectById","setQuantity","find","parseInt","src","alt","TableContainer","Table","TableBody","TableRow","TableCell","description","quantityInStock","quantityVal","disabled","updatedQuantity","Contact","props","SignedInMenu","navigate","useNavigate","React","anchorEl","setAnchorEl","Boolean","handleClose","stringToColor","string","hash","charCodeAt","substr","currentTarget","typography","nameStr","split","children","stringAvatar","email","Menu","onClose","TransitionComponent","Fade","MenuItem","midLinks","path","rightLinks","navStyles","textDecoration","Header","itemCount","reduce","sum","anchorElNav","setAnchorElNav","anchorElUser","setAnchorElUser","handleCloseNavMenu","handleCloseUserMenu","AppBar","Toolbar","IconButton","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","ListItemButton","NavLink","Switch","inputProps","mode","handleOnChange","Badge","badgeContent","ShoppingCart","flexGrow","Tooltip","mt","textAlign","ServerError","useLocation","detail","BasketSummary","subTotal","deliveryFee","colSpan","align","fontStyle","BasketTable","isBasket","TableHead","border","scope","marginRight","Remove","Add","Delete","borderBottom","borderColor","BasketPage","getWindowDimensions","windowDimensions","isSMVersion","setIsSMVersion","BasketTableSM","AppTextInput","useController","defaultValue","fieldState","field","helperText","AppCheckbox","AddressForm","useFormContext","formState","isDirty","StripeInput","forwardRef","ref","Component","elementRef","useRef","useImperativeHandle","focus","current","onReady","element","PaymentForm","onCardInputChange","cardState","elementError","cardNumber","autoComplete","InputLabelProps","shrink","InputProps","inputComponent","CardNumberElement","cardExpiry","CardExpiryElement","cardCvc","CardCvcElement","Review","validationSchema","yup","fullName","required","address1","address2","city","zip","country","nameOnCard","steps","CheckoutPage","activeStep","setActiveStep","orderNumber","setOrderNumber","setLoading","setCardState","cardComplete","setCardComplete","paymentMessage","setPaymentMessage","paymentSucceeded","setpaymentSucceeded","stripe","useStripe","elements","useElements","elementType","complete","currentValidationSchema","methods","useForm","resolver","yupResolver","reset","getValues","saveAddress","submitOrder","shippingAddress","cardElement","getElement","confirmCardPayment","clientSecret","payment_method","card","billing_details","paymentResult","paymentIntent","orderNo","handleNext","handleBack","my","Stepper","pt","pb","Step","StepLabel","onSubmit","handleSubmit","step","Error","getStepContent","ml","isValid","stripePromise","loadStripe","CheckoutWrapper","finally","Register","isSubmitting","setError","maxWidth","flexDirection","m","success","forEach","handleApiErrors","noValidate","margin","autoFocus","username","pattern","password","Login","location","submitForm","from","pathname","PrivateRoute","OrderDetails","order","setSelectedOrder","orderItems","orderStatus","orders","setOrders","selectedOrderNumber","setSelectedOrderNumber","o","total","orderDate","Item","imgSrc","HomePageCarousel","navButtonsProps","borderRadius","navButtonsWrapperProps","bottom","App","darkMode","setDarkMode","initApp","paletteType","theme","createTheme","palette","background","default","ThemeProvider","hideProgressBar","CssBaseline","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","HistoryRouter","basename","history","setState","useLayoutEffect","listen","navigationType","navigator","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.357e63d2.chunk.js","sourcesContent":["export interface MetaData {\n  currentPage: number;\n  totalPage: number;\n  pageSize: number;\n  totalCount: number;\n}\n\nexport class PaginatedResponse<T> {\n  /**\n   *\n   */\n  constructor(items: T, metaData: MetaData) {\n    this.items = items;\n    this.metaData = metaData;\n  }\n  items: T;\n  metaData: MetaData;\n}\n","export function getCookie(key: string) {\n  const b = document.cookie.match(\"(^|;)\\\\s*\" + key + \"\\\\s*=\\\\s*([^;]+)\");\n  return b ? b.pop() : \"\";\n}\n\nexport function formatCurrency(amount: number, isPrice: boolean) {\n  return \"S\" + (isPrice ? convertPrice(amount) : amount.toFixed(2));\n}\n\nexport function convertPrice(amount: number): number {\n  return amount / 100;\n}\n","import { createAsyncThunk, createSlice, isAnyOf } from \"@reduxjs/toolkit\";\nimport agent from \"../../app/api/agent\";\nimport { Basket } from \"../../app/models/basket\";\nimport { getCookie } from \"../../app/util/util\";\n\ninterface Basketstate {\n  basket: Basket | null;\n  status: string;\n}\n\nconst initialState: Basketstate = {\n  basket: null,\n  status: \"idle\",\n};\nexport const fetchBasketAsync = createAsyncThunk<Basket>(\n  \"basket/fetchBasketAsync\",\n  async (_: any, thunkAPI: any) => {\n    try {\n      return await agent.Basket.get();\n    } catch (error: any) {\n      return thunkAPI.rejectWithValue({ error: error.data });\n    }\n  },\n  {\n    condition: () => {\n      if (!getCookie(\"buyerId\")) {\n        return false;\n      }\n    },\n  }\n);\n\nexport const addBasketItemAsync = createAsyncThunk<\n  Basket,\n  { productId: number; quantity?: number }\n>(\n  \"basket/addBasketItemAsync\",\n  async ({ productId, quantity = 1 }, thunkAPI) => {\n    try {\n      return await agent.Basket.addItem(productId, quantity);\n    } catch (error: any) {\n      return thunkAPI.rejectWithValue({ error: error.data });\n    }\n  }\n);\n\nexport const removeBasketItemAsync = createAsyncThunk<\n  void,\n  { productId: number; quantity?: number; name?: string }\n>(\"basket/removeBasketItemAsync\", async ({ productId, quantity }, thunkAPI) => {\n  try {\n    await agent.Basket.removeItem(productId, quantity);\n  } catch (error: any) {\n    return thunkAPI.rejectWithValue({ error: error.data });\n  }\n});\n\nexport const basketSlice = createSlice({\n  name: \"basket\",\n  initialState,\n  reducers: {\n    setBasket: (state, action) => {\n      state.basket = action.payload;\n    },\n    clearBasket: (state) => {\n      state.basket = null;\n    },\n  },\n  extraReducers: (builder) => {\n    builder.addCase(addBasketItemAsync.pending, (state, action) => {\n      console.log(action);\n      state.status = \"pendingAddItem\" + action.meta.arg.productId;\n    });\n\n    builder.addCase(removeBasketItemAsync.pending, (state, action) => {\n      console.log(action);\n      state.status =\n        \"pendingRemoveItem\" + action.meta.arg.productId + action.meta.arg.name;\n    });\n    builder.addCase(\n      removeBasketItemAsync.fulfilled,\n      (state: Basketstate, action) => {\n        const { productId, quantity } = action.meta.arg;\n        const itemIndex = state.basket?.items.findIndex(\n          (\n            i //i.productId === productId\n          ) => i.productId === productId\n        )!;\n\n        if (itemIndex < 0 || itemIndex === undefined) return;\n        state.basket!.items[itemIndex].quantity -= quantity!;\n        if (state.basket?.items[itemIndex].quantity === 0) {\n          state.basket?.items.splice(itemIndex, 1);\n        }\n        state.status = \"idle\";\n      }\n    );\n    builder.addCase(removeBasketItemAsync.rejected, (state, action) => {\n      state.status = \"idle\";\n      console.log(action.payload);\n    });\n    builder.addMatcher(\n      isAnyOf(addBasketItemAsync.fulfilled, fetchBasketAsync.fulfilled),\n      (state, action) => {\n        state.basket = action.payload;\n        state.status = \"idle\";\n      }\n    );\n    builder.addMatcher(\n      isAnyOf(addBasketItemAsync.rejected, fetchBasketAsync.rejected),\n      (state, action) => {\n        state.status = \"idle\";\n        console.log(action.payload);\n      }\n    );\n  },\n});\n\nexport const { setBasket, clearBasket } = basketSlice.actions;\n","import { createAsyncThunk, createSlice, isAnyOf } from \"@reduxjs/toolkit\";\nimport { FieldValues } from \"react-hook-form\";\nimport { toast } from \"react-toastify\";\nimport agent from \"../../app/api/agent\";\nimport { User } from \"../../app/models/user\";\nimport { setBasket } from \"../basket/basketSlice\";\n\nexport interface AccountState {\n  user: User | null;\n  isSessionExpired: boolean;\n  redirectUrl: string;\n}\n\nconst initialState: AccountState = {\n  user: null,\n  isSessionExpired: true,\n  redirectUrl: \"\",\n};\n\nexport const signInUser = createAsyncThunk<User, FieldValues>(\n  \"account/signInUser\",\n  async (data: FieldValues, thunkAPI: any) => {\n    try {\n      const userDto = await agent.Account.login(data);\n      const { basket, ...user } = userDto;\n      if (basket) {\n        thunkAPI.dispatch(setBasket(basket));\n      }\n      localStorage.setItem(\"user\", JSON.stringify(user));\n\n      return user;\n    } catch (error: any) {\n      return thunkAPI.rejectWithValue({ error: error!.data });\n    }\n  }\n);\n\nexport const fetchCurrentUser = createAsyncThunk<User>(\n  \"account/fetchCurrentUser\",\n  async (_: any, thunkAPI: any) => {\n    thunkAPI.dispatch(setUser(JSON.parse(localStorage.getItem(\"user\")!)));\n    try {\n      const userDto = await agent.Account.currentUser();\n      const { basket, ...user } = userDto;\n      if (basket) {\n        thunkAPI.dispatch(setBasket(basket));\n      }\n      localStorage.setItem(\"user\", JSON.stringify(user));\n      return user;\n    } catch (error: any) {\n      return thunkAPI.rejectWithValue({ error: error!.data });\n    }\n  },\n  {\n    condition: () => {\n      if (!localStorage.getItem(\"user\")) {\n        return false;\n      }\n    },\n  }\n);\n\nexport const accountSlice = createSlice({\n  name: \"account\",\n  initialState,\n  reducers: {\n    signOut: (state) => {\n      state.user = null;\n      localStorage.removeItem(\"user\");\n    },\n    setUser: (state, action) => {\n      state.user = action.payload;\n    },\n    setURL: (state, action) => {\n      state.redirectUrl = action.payload;\n    },\n  },\n  extraReducers: (builder) => {\n    builder.addCase(signInUser.rejected, (state, action) => {\n      throw action.payload;\n    });\n\n    builder.addCase(fetchCurrentUser.rejected, (state, action) => {\n      // const history = createBrowserHistory();\n      state.user = null;\n      localStorage.removeItem(\"user\");\n      toast.error(\"Session expired - please login again\");\n\n      state.isSessionExpired = true;\n      state.redirectUrl = \"/\";\n      // myHistory.replace(\"/\", {});\n    });\n    builder.addMatcher(\n      isAnyOf(signInUser.fulfilled, fetchCurrentUser.fulfilled),\n      (state, action) => {\n        state.user = action.payload;\n        state.isSessionExpired = false;\n        state.redirectUrl = \"\";\n      }\n    );\n  },\n});\n\nexport const { signOut, setUser, setURL } = accountSlice.actions;\n","import {\n  createAsyncThunk,\n  createEntityAdapter,\n  createSlice,\n} from \"@reduxjs/toolkit\";\nimport agent from \"../../app/api/agent\";\nimport { MetaData } from \"../../app/models/pagination\";\nimport { Product, ProductParameters } from \"../../app/models/product\";\nimport { RootState } from \"../../app/store/configureStore\";\n\ninterface CatalogState {\n  productsLoaded: boolean;\n  filtersLoaded: boolean;\n  status: string;\n  brands: string[];\n  types: string[];\n  productParams: ProductParameters;\n  metaData: MetaData | null;\n}\n\nconst productsAdapter = createEntityAdapter<Product>();\n\nfunction getAxiosParams(productParam: ProductParameters) {\n  const params = new URLSearchParams();\n  params.append(\"pageNumber\", productParam.pageNumber.toString());\n  params.append(\"pageSize\", productParam.pageSize.toString());\n  params.append(\"orderBy\", productParam.orderBy);\n  if (productParam.searchTerm) {\n    params.append(\"searchTerm\", productParam.searchTerm);\n  }\n  if (productParam.brands.length > 0)\n    params.append(\"brands\", productParam.brands?.toString());\n  if (productParam.types.length > 0)\n    params.append(\"types\", productParam.types?.toString());\n\n  return params;\n}\n\nexport const fetchProductsAsync = createAsyncThunk<\n  Product[],\n  void,\n  { state: RootState }\n>(\"catalog/fetchProductsAsync\", async (_, thunkAPI) => {\n  const params = getAxiosParams(thunkAPI.getState()!.catalog.productParams);\n  try {\n    const response = await agent.Catalog.list(params);\n\n    thunkAPI.dispatch(setMetaData(response.metaData));\n\n    return response.items;\n  } catch (error: any) {\n    return thunkAPI.rejectWithValue({ error: error.data });\n  }\n});\n\nexport const fetchProductAsync = createAsyncThunk<Product, number>(\n  \"catalog/fetchProductAsync\",\n  async (productId, thunkAPI) => {\n    try {\n      return agent.Catalog.details(productId);\n    } catch (error: any) {\n      return thunkAPI.rejectWithValue({ error: error.data });\n    }\n  }\n);\n\nexport const fetchFiltersAsync = createAsyncThunk(\n  \"catalog/fetchFilters\",\n  async (_, thunkAPI) => {\n    try {\n      return agent.Catalog.fetchFilters();\n    } catch (error: any) {\n      return thunkAPI.rejectWithValue({ error: error.data });\n    }\n  }\n);\n\nfunction initParams() {\n  return {\n    pageNumber: 1,\n    pageSize: 6,\n    orderBy: \"name\",\n    brands: [],\n    types: [],\n  };\n}\n\nexport const catalogSlice = createSlice({\n  name: \"catalog\",\n  initialState: productsAdapter.getInitialState<CatalogState>({\n    productsLoaded: false,\n    status: \"idle\",\n    filtersLoaded: false,\n    brands: [],\n    types: [],\n    productParams: initParams(),\n    metaData: null,\n  }),\n  reducers: {\n    setProductParams: (state, action) => {\n      state.productsLoaded = false;\n      state.productParams = {\n        ...state.productParams,\n        ...action.payload,\n        pageNumber: 1,\n      };\n    },\n    setPageNumber: (state, action) => {\n      state.productsLoaded = false;\n      state.productParams = {\n        ...state.productParams,\n        ...action.payload,\n      };\n    },\n\n    setMetaData: (state, action) => {\n      state.metaData = action.payload;\n    },\n    resetProductParams: (state) => {\n      state.productParams = initParams();\n    },\n  },\n  extraReducers: (builder) => {\n    builder.addCase(fetchProductsAsync.pending, (state) => {\n      state.status = \"pendingFethProducts\";\n    });\n    builder.addCase(fetchProductsAsync.fulfilled, (state, action) => {\n      productsAdapter.setAll(state, action.payload);\n      state.status = \"idle\";\n      state.productsLoaded = true;\n    });\n    builder.addCase(fetchProductsAsync.rejected, (state) => {\n      state.status = \"idle\";\n    });\n    builder.addCase(fetchProductAsync.pending, (state) => {\n      state.status = \"pendingFethProduct\";\n    });\n    builder.addCase(fetchProductAsync.fulfilled, (state, action) => {\n      productsAdapter.upsertOne(state, action.payload);\n      state.status = \"idle\";\n    });\n    builder.addCase(fetchProductAsync.rejected, (state, action) => {\n      state.status = \"idle\";\n      console.log(action);\n    });\n    builder.addCase(fetchFiltersAsync.pending, (state) => {\n      state.status = \"pendingFethFilters\";\n    });\n    builder.addCase(fetchFiltersAsync.fulfilled, (state, action) => {\n      state.brands = action.payload.brands;\n      state.types = action.payload.types;\n      state.status = \"idle\";\n\n      state.filtersLoaded = true;\n    });\n    builder.addCase(fetchFiltersAsync.rejected, (state, action) => {\n      state.status = \"idle\";\n      console.log(action);\n    });\n  },\n});\n\nexport const productSelectors = productsAdapter.getSelectors(\n  (state: RootState) => state.catalog\n);\nexport const {\n  setProductParams,\n  resetProductParams,\n  setMetaData,\n  setPageNumber,\n} = catalogSlice.actions;\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nexport interface CounterState {\n  data: number;\n  title: string;\n}\n\nconst initialState: CounterState = {\n  data: 42,\n  title: \"YARC (yet another redux counter with redux toolkit)\",\n};\n\nexport const counterSlice = createSlice({\n  name: \"counter\",\n  initialState,\n  reducers: {\n    increment: (state, action) => {\n      state.data += action.payload;\n    },\n    decrement: (state, action) => {\n      state.data -= action.payload;\n    },\n  },\n});\n\nexport const { increment, decrement } = counterSlice.actions;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\nimport { accountSlice } from \"../../features/account/accountSlice\";\nimport { basketSlice } from \"../../features/basket/basketSlice\";\nimport { catalogSlice } from \"../../features/catalog/catalogSlice\";\nimport { counterSlice } from \"../../features/contact/CounterSlice\";\n\nexport const store = configureStore({\n  reducer: {\n    counter: counterSlice.reducer,\n    basket: basketSlice.reducer,\n    catalog: catalogSlice.reducer,\n    account: accountSlice.reducer,\n  },\n});\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;\n\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import { createBrowserHistory } from \"history\";\n\nexport const myHistory = createBrowserHistory({ window });\n","import axios, { AxiosError, AxiosResponse } from \"axios\";\nimport { toast } from \"react-toastify\";\nimport { PaginatedResponse } from \"../models/pagination\";\nimport { store } from \"../store/configureStore\";\nimport { myHistory } from \"./history\";\n\naxios.defaults.baseURL = process.env.REACT_APP_API_URL;\naxios.defaults.withCredentials = true;\n\nconst responseBody = (response: AxiosResponse) => {\n  return response.data;\n};\n\nconst sleep = () => new Promise((resolve) => setTimeout(resolve, 500));\n\naxios.interceptors.request.use((config: any) => {\n  const token = store.getState().account.user?.token;\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\naxios.interceptors.response.use(\n  async (response) => {\n    if (process.env.NODE_ENV === \"development\") {\n      await sleep();\n    }\n    const pagination = response.headers[\"pagination\"];\n    if (pagination) {\n      response.data = new PaginatedResponse(\n        response.data,\n        JSON.parse(pagination)\n      );\n    }\n    return response;\n  },\n  (error: AxiosError) => {\n    const { data, status } = error.response!;\n\n    switch (status) {\n      case 400:\n        if (data.errors) {\n          const modelStateErrors: string[] = [];\n          for (let key in data.errors) {\n            const error = data.errors[key];\n            if (error) {\n              modelStateErrors.push(error);\n            }\n          }\n          throw modelStateErrors.flat();\n        }\n        toast.error(data.title);\n        break;\n      case 401:\n        toast.error(data.title);\n        break;\n      case 404:\n        toast.error(data.title);\n        break;\n      case 500:\n        // myHistory.replace(\"/server-error\");\n        myHistory.replace(\"/server-error\", { error: data });\n\n        break;\n\n      default:\n        break;\n    }\n    return Promise.reject(error.response);\n  }\n);\n\nconst requests = {\n  get: (url: string, params?: URLSearchParams) =>\n    axios.get(url, { params }).then(responseBody),\n  post: async (url: string, body: {}) =>\n    axios.post(url, body).then(responseBody),\n  put: (url: string, body: {}) => axios.put(url, body).then(responseBody),\n  delete: (url: string) => axios.delete(url).then(responseBody),\n};\nconst Catalog = {\n  list: (params: URLSearchParams) => requests.get(\"products\", params),\n  details: (id: number) => requests.get(`products/${id}`),\n  fetchFilters: () => requests.get(\"products/filters\"),\n};\n\nconst TestErrors = {\n  get400Error: () => {\n    return requests.get(\"buggy/bad-request\");\n  },\n  get401Error: () => {\n    return requests.get(\"buggy/un-authorized\");\n  },\n  get404Error: () => {\n    return requests.get(\"buggy/not-found\");\n  },\n  getValidationError: () => {\n    return requests.get(\"buggy/validation-error\");\n  },\n  get500Error: () => {\n    return requests.get(\"buggy/server-error\");\n  },\n};\n\nconst Basket = {\n  get: () => requests.get(\"basket\"),\n  addItem: (productId: number, quantity = 1) =>\n    requests.post(`basket?productId=${productId}&quantity=${quantity}`, {}),\n  removeItem: (productId: number, quantity = 1) =>\n    requests.delete(`basket?productId=${productId}&quantity=${quantity}`),\n};\n\nconst Account = {\n  login: (values: any) => requests.post(\"account/login\", values),\n  register: (values: any) => requests.post(\"account/register\", values),\n  currentUser: () => requests.get(\"account/currentUser\"),\n  fetchAddress: () => requests.get(\"account/savedAddress\"),\n};\n\nconst Orders = {\n  list: () => requests.get(\"orders\"),\n  fetch: (id: number) => requests.get(`orders/${id}`),\n  create: (values: any) => requests.post(\"orders\", values),\n};\n\nconst Payments = {\n  createPaymentIntent: () => requests.post(\"payment\", {}),\n};\n\nconst agent = {\n  Catalog,\n  TestErrors,\n  Basket,\n  Account,\n  Orders,\n  Payments,\n};\n\nexport default agent;\n","import {\n  Alert,\n  AlertTitle,\n  Button,\n  ButtonGroup,\n  Container,\n  List,\n  ListItem,\n  ListItemText,\n  Typography,\n} from \"@mui/material\";\nimport { useState } from \"react\";\nimport agent from \"../../app/api/agent\";\n\nconst AboutPage = () => {\n  const [validationErrors, setValidationError] = useState<string[]>([]);\n  const GetValidationError = () => {\n    agent.TestErrors.getValidationError()\n      .then(() => console.log(\"Should not see this\"))\n      .catch((error) => {\n        setValidationError(error);\n      });\n  };\n  return (\n    <Container>\n      <Typography gutterBottom variant='h2'>\n        Errors for testing purpose\n      </Typography>\n\n      <ButtonGroup fullWidth>\n        <Button\n          variant='contained'\n          onClick={() => {\n            agent.TestErrors.get400Error().catch((error) => console.log(error));\n          }}\n        >\n          {\" \"}\n          Test 400 Error\n        </Button>\n        <Button\n          variant='contained'\n          onClick={() => {\n            agent.TestErrors.get401Error().catch((error) => console.log(error));\n          }}\n        >\n          {\" \"}\n          Test 401 Error\n        </Button>\n        <Button\n          variant='contained'\n          onClick={() => {\n            agent.TestErrors.get404Error().catch((error) => console.log(error));\n          }}\n        >\n          {\" \"}\n          Test 404 Error\n        </Button>\n        <Button\n          variant='contained'\n          onClick={() => {\n            agent.TestErrors.get500Error().catch((error) => console.log(error));\n          }}\n        >\n          {\" \"}\n          Test 500 Error\n        </Button>\n        <Button\n          variant='contained'\n          onClick={() => {\n            GetValidationError();\n          }}\n        >\n          {\" \"}\n          Test Validation Error\n        </Button>\n      </ButtonGroup>\n      {validationErrors.length > 0 && (\n        <Alert severity='error'>\n          <AlertTitle>Validation Errors</AlertTitle>\n          <List>\n            {validationErrors.map((error) => (\n              <ListItem key={error}>\n                <ListItemText>{error}</ListItemText>\n              </ListItem>\n            ))}\n          </List>\n        </Alert>\n      )}\n    </Container>\n  );\n};\n\nexport default AboutPage;\n","import { Box, Typography, Pagination } from \"@mui/material\";\nimport React from \"react\";\nimport { MetaData } from \"../models/pagination\";\n\ninterface Props {\n  metaData: MetaData;\n  onPageChange: (page: number) => void;\n}\n\nconst AppPagination = ({ metaData, onPageChange }: Props) => {\n  const { currentPage, totalCount, totalPage, pageSize } = metaData;\n  return (\n    <Box display='flex' justifyContent='space-between' alignContent='center'>\n      <Typography>\n        {(currentPage - 1) * pageSize + 1}-\n        {currentPage * pageSize > totalCount\n          ? totalCount\n          : currentPage * pageSize}{\" \"}\n        of {totalCount} items\n      </Typography>\n      <Pagination\n        count={totalPage}\n        color='secondary'\n        size='large'\n        page={currentPage}\n        onChange={(event, page) => {\n          onPageChange(page);\n        }}\n      />\n    </Box>\n  );\n};\n\nexport default AppPagination;\n","import {\n  FormControl,\n  FormGroup,\n  FormControlLabel,\n  Checkbox,\n} from \"@mui/material\";\nimport React, { useState } from \"react\";\n\ninterface Props {\n  items: string[];\n  checked?: string[];\n  onChange: (items: string[]) => void;\n}\nconst CheckBoxGroup = ({ items, onChange, checked }: Props) => {\n  const [checkedItems, setCheckedItems] = useState(checked || []);\n\n  const handleChecked = (value: string) => {\n    const currentIndex = checkedItems.findIndex((item) => item === value);\n    let newChecked: string[] = [];\n    if (currentIndex === -1) {\n      newChecked = [...checkedItems, value];\n    } else {\n      newChecked = checkedItems.filter((x) => x !== value);\n    }\n    setCheckedItems(newChecked);\n    onChange(newChecked);\n  };\n\n  return (\n    <FormControl component='fieldset'>\n      <FormGroup>\n        {items.map((item) => (\n          <FormControlLabel\n            control={\n              <Checkbox\n                checked={checkedItems.indexOf(item) !== -1}\n                onClick={() => handleChecked(item)}\n              />\n            }\n            label={item}\n            key={item}\n          />\n        ))}\n      </FormGroup>\n    </FormControl>\n  );\n};\n\nexport default CheckBoxGroup;\n","import {\n  FormControl,\n  RadioGroup,\n  FormControlLabel,\n  Radio,\n} from \"@mui/material\";\nimport React from \"react\";\n\ninterface Props {\n  options: any[];\n  onChange: (event: any) => void;\n  selectedValue: string;\n}\n\nconst RadioButtonGroup = ({ options, onChange, selectedValue }: Props) => {\n  return (\n    <FormControl component='fieldset'>\n      <RadioGroup onChange={onChange} value={selectedValue}>\n        {options.map(({ value, label }) => (\n          <FormControlLabel\n            value={value}\n            control={<Radio />}\n            label={label}\n            key={value}\n          />\n        ))}\n      </RadioGroup>\n    </FormControl>\n  );\n};\n\nexport default RadioButtonGroup;\n","import { Backdrop, Box, CircularProgress, Typography } from \"@mui/material\";\n\nconst Loading = ({ message = \"Loading...\" }) => {\n  return (\n    <Backdrop open={true} invisible={true}>\n      <Box\n        display='flex'\n        justifyContent='center'\n        alignItems='center'\n        height='100vh'\n      >\n        <CircularProgress size={100} color='secondary'></CircularProgress>\n        <Typography\n          variant='h4'\n          sx={{ justifyContent: \"center\", position: \"fixed\", top: \"60%\" }}\n        >\n          {message}\n        </Typography>\n      </Box>\n    </Backdrop>\n  );\n};\n\nexport default Loading;\n","import { LoadingButton } from \"@material-ui/lab\";\nimport {\n  Avatar,\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  CardHeader,\n  CardMedia,\n  Typography,\n} from \"@mui/material\";\nimport { Link } from \"react-router-dom\";\nimport { Product } from \"../../app/models/product\";\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\nimport { formatCurrency } from \"../../app/util/util\";\nimport { addBasketItemAsync } from \"../basket/basketSlice\";\n\ninterface props {\n  product: Product;\n}\n\nconst ProductCard = ({ product }: props) => {\n  const { status } = useAppSelector((state) => state.basket);\n\n  const dispatch = useAppDispatch();\n  // function handleAddItem(productId: number) {\n  //   setLoading(true);\n  //   agent.Basket.addItem(productId)\n  //     .then((basket) => dispatch(setBasket(basket)))\n  //     .catch((error) => console.log(error))\n  //     .finally(() => setLoading(false));\n  // }\n  return (\n    <Card>\n      <CardHeader\n        avatar={\n          <Avatar sx={{ bgcolor: \"secondary.main\" }}>\n            {product.name.charAt(0).toUpperCase()}\n          </Avatar>\n        }\n        title={product.name}\n        titleTypographyProps={{\n          sx: { fontWeight: \"bold\", color: \"primary.main\" },\n        }}\n      ></CardHeader>\n      <CardMedia\n        sx={{\n          height: 140,\n          backgroundSize: \"contain\",\n          bgcolor: \"primary.light\",\n        }}\n        image={product.pictureUrl}\n        title={product.name}\n      />\n      <CardContent>\n        <Typography gutterBottom color='secondary' variant='h5' component='div'>\n          {formatCurrency(product.price, true)}\n        </Typography>\n        <Typography variant='body2' color='text.secondary'>\n          {product.brand} / {product.type}\n        </Typography>\n      </CardContent>\n      <CardActions>\n        <LoadingButton\n          loading={status.includes(\"pendingAddItem\" + product.id)}\n          onClick={() =>\n            dispatch(addBasketItemAsync({ productId: product.id }))\n          }\n          size='small'\n        >\n          Add to cart\n        </LoadingButton>\n        <Button component={Link} to={`/catalog/${product.id}`} size='small'>\n          View\n        </Button>\n      </CardActions>\n    </Card>\n  );\n};\n\nexport default ProductCard;\n","import {\n  Card,\n  CardActions,\n  CardContent,\n  CardHeader,\n  Grid,\n  Skeleton,\n} from \"@mui/material\";\n\nexport default function ProductCardSkeleton() {\n  return (\n    <Grid item xs component={Card}>\n      <CardHeader\n        avatar={\n          <Skeleton\n            animation='wave'\n            variant='circular'\n            width={40}\n            height={40}\n          />\n        }\n        title={\n          <Skeleton\n            animation='wave'\n            height={10}\n            width='80%'\n            style={{ marginBottom: 6 }}\n          />\n        }\n      />\n      <Skeleton sx={{ height: 190 }} animation='wave' variant='rectangular' />\n      <CardContent>\n        <>\n          <Skeleton animation='wave' height={10} style={{ marginBottom: 6 }} />\n          <Skeleton animation='wave' height={10} width='80%' />\n        </>\n      </CardContent>\n      <CardActions>\n        <>\n          <Skeleton animation='wave' height={10} width='40%' />\n          <Skeleton animation='wave' height={10} width='20%' />\n        </>\n      </CardActions>\n    </Grid>\n  );\n}\n","import { Grid } from \"@mui/material\";\nimport { Product } from \"../../app/models/product\";\nimport { useAppSelector } from \"../../app/store/configureStore\";\nimport ProductCard from \"./ProductCard\";\nimport ProductCardSkeleton from \"./ProductCardSkeleton\";\n\ninterface Props {\n  products: Product[];\n}\n\nconst ProductList = ({ products }: Props) => {\n  const { productsLoaded } = useAppSelector((state) => state.catalog);\n  return (\n    <Grid container spacing={4}>\n      {products.map((product: Product) => (\n        <Grid key={product.id} item xs={12} sm={6} md={4}>\n          {productsLoaded ? (\n            <ProductCard product={product}></ProductCard>\n          ) : (\n            <ProductCardSkeleton />\n          )}\n        </Grid>\n      ))}\n    </Grid>\n  );\n};\n\nexport default ProductList;\n","import { Button, debounce, TextField } from \"@mui/material\";\nimport { useEffect, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useAppSelector } from \"../../app/store/configureStore\";\nimport { setProductParams } from \"./catalogSlice\";\nimport { FilterAlt } from \"@mui/icons-material\";\nimport Grid from \"@mui/material/Grid\";\nimport Box from \"@mui/material/Box\";\n\ninterface Props {\n  isFilterIcon: boolean;\n  showFilters: boolean;\n  setIsFilterIcon: (event: any) => void;\n  setShowFilters: (event: any) => void;\n}\n\nfunction getWindowDimensions() {\n  const { innerWidth: width, innerHeight: height } = window;\n  return {\n    width,\n    height,\n  };\n}\n\nconst ProductSearch = ({\n  isFilterIcon,\n  setIsFilterIcon,\n  showFilters,\n  setShowFilters,\n}: Props) => {\n  const { productParams } = useAppSelector((state) => state.catalog);\n  const dispatch = useDispatch();\n  const [searchTerm, setSearchTerm] = useState(productParams.searchTerm);\n  const debouncedSearch = debounce((event: any) => {\n    dispatch(setProductParams({ searchTerm: event.target.value }));\n  }, 1000);\n  console.log(isFilterIcon);\n  // const [windowDimensions, setWindowDimensions] = useState(\n  //   getWindowDimensions()\n  // );\n  // useEffect(() => {\n  //   if (windowDimensions.width < 600) {\n  //     setIsFilterIcon(true);\n  //     setShowFilters(false);\n  //   } else {\n  //     setIsFilterIcon(false);\n  //     setShowFilters(true);\n  //   }\n  // }, [setIsFilterIcon, setShowFilters, windowDimensions.width]);\n\n  if (isFilterIcon) {\n    return (\n      <Grid container>\n        <Grid xs={12}>\n          <Box sx={{ display: \"flex\", alignItems: \"flex-end\" }}>\n            <TextField\n              label='Search Products'\n              variant='outlined'\n              fullWidth\n              value={searchTerm}\n              onChange={(event: any) => {\n                setSearchTerm(event.target.value);\n                debouncedSearch(event);\n              }}\n            />\n            <Button onClick={() => setShowFilters(!showFilters)}>\n              <FilterAlt />\n            </Button>\n          </Box>\n        </Grid>\n      </Grid>\n    );\n  } else {\n    return (\n      <Grid container>\n        <Grid xs={12}>\n          <TextField\n            label='Search Products'\n            variant='outlined'\n            fullWidth\n            value={searchTerm}\n            onChange={(event: any) => {\n              setSearchTerm(event.target.value);\n              debouncedSearch(event);\n            }}\n          />\n        </Grid>\n      </Grid>\n    );\n  }\n};\n\nexport default ProductSearch;\n","import { Paper } from \"@mui/material\";\nimport Grid from \"@mui/material/Grid\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport AppPagination from \"../../app/components/AppPagination\";\nimport CheckBoxGroup from \"../../app/components/CheckBoxGroup\";\nimport RadioButtonGroup from \"../../app/components/RadioButtonGroup\";\nimport Loading from \"../../app/layout/Loading\";\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\nimport {\n  fetchFiltersAsync,\n  fetchProductsAsync,\n  productSelectors,\n  setPageNumber,\n  setProductParams,\n} from \"./catalogSlice\";\nimport ProductList from \"./ProductList\";\nimport ProductSearch from \"./ProductSearch\";\n\nconst sortOptions = [\n  { value: \"name\", label: \"Alphabetical\" },\n  { value: \"priceDesc\", label: \"Price - High to Low\" },\n  { value: \"price\", label: \"Price - Low to High\" },\n];\n\nfunction getWindowDimensions() {\n  const { innerWidth: width, innerHeight: height } = window;\n  return {\n    width,\n    height,\n  };\n}\n\nexport default function Catalog() {\n  const products = useAppSelector(productSelectors.selectAll);\n  const {\n    productsLoaded,\n    filtersLoaded,\n    brands,\n    types,\n    productParams,\n    metaData,\n  } = useAppSelector((state) => state.catalog);\n  const dispatch = useAppDispatch();\n\n  const [isFilterIcon, setIsFilterIcon] = useState(false);\n  const [showFilters, setShowFilters] = useState(false);\n\n  // const [windowDimensions, setWindowDimensions] = useState(\n  //   getWindowDimensions()\n  // );\n\n  useEffect(() => {\n    if (!productsLoaded) {\n      dispatch(fetchProductsAsync());\n    }\n  }, [productsLoaded, dispatch]);\n\n  useEffect(() => {\n    if (!filtersLoaded) {\n      dispatch(fetchFiltersAsync());\n    }\n  }, [filtersLoaded, dispatch]);\n\n  const handleScreenResize = useCallback(\n    (event: any) => {\n      var dimensions = {\n        width: event.target.innerWidth,\n        height: event.target.innerHeight,\n      };\n\n      if (dimensions.width < 600) {\n        setIsFilterIcon(true);\n        setShowFilters(false);\n      } else {\n        setIsFilterIcon(false);\n        setShowFilters(true);\n      }\n\n      console.log(\"width: \" + dimensions.width);\n      console.log(\"height: \" + dimensions.height);\n    },\n    [showFilters]\n  );\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", (event) => {\n      handleScreenResize(event);\n    });\n    return () => {\n      window.removeEventListener(\"resize\", (event) =>\n        handleScreenResize(event)\n      );\n    };\n  }, [handleScreenResize]);\n\n  useEffect(() => {\n    let { innerWidth: width, innerHeight: height } = window;\n    if (width < 600) {\n      setIsFilterIcon(true);\n      setShowFilters(false);\n    } else {\n      setIsFilterIcon(false);\n      setShowFilters(true);\n    }\n  }, []);\n\n  console.log(\"Show filters: \" + showFilters);\n\n  if (!filtersLoaded) return <Loading></Loading>;\n\n  return (\n    <Grid container columnSpacing={4}>\n      <Grid item xs={12} sm={4} md={3}>\n        <Paper sx={{ mb: 2 }}>\n          <ProductSearch\n            isFilterIcon={isFilterIcon}\n            showFilters={showFilters}\n            setIsFilterIcon={setIsFilterIcon}\n            setShowFilters={setShowFilters}\n          />\n        </Paper>\n        {showFilters && (\n          <>\n            <Paper sx={{ mb: 2, p: 2 }}>\n              <RadioButtonGroup\n                options={sortOptions}\n                selectedValue={productParams.orderBy}\n                onChange={(event: any) => {\n                  dispatch(setProductParams({ orderBy: event.target.value }));\n                }}\n              ></RadioButtonGroup>\n            </Paper>\n            <Paper sx={{ mb: 2, p: 2 }}>\n              <CheckBoxGroup\n                items={brands}\n                checked={productParams.brands}\n                onChange={(items: string[]) => {\n                  dispatch(setProductParams({ brands: items }));\n                }}\n              />\n            </Paper>\n            <Paper sx={{ mb: 2, p: 2 }}>\n              <CheckBoxGroup\n                items={types}\n                checked={productParams.types}\n                onChange={(items: string[]) => {\n                  dispatch(setProductParams({ types: items }));\n                }}\n              />\n            </Paper>\n          </>\n        )}\n      </Grid>\n      <Grid item xs={12} sm={8} md={9}>\n        <ProductList products={products}></ProductList>\n      </Grid>\n      <Grid item xs={0} sm={4} md={3} />\n      <Grid item xs={12} sm={8} md={9} sx={{ mb: 2 }}>\n        {metaData && (\n          <AppPagination\n            metaData={metaData}\n            onPageChange={(page: number) =>\n              dispatch(setPageNumber({ pageNumber: page }))\n            }\n          />\n        )}\n      </Grid>\n    </Grid>\n  );\n}\n","import { Button, Container, Divider, Paper, Typography } from \"@mui/material\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst NotFound = () => {\n  return (\n    <Container component={Paper}>\n      <Typography variant='h3' gutterBottom>\n        Oops-We could not find what you are looking for\n      </Typography>\n      <Divider></Divider>\n      <Button fullWidth component={Link} to='/catalog'>\n        Go back to shop\n      </Button>\n    </Container>\n  );\n};\n\nexport default NotFound;\n","import { LoadingButton } from \"@material-ui/lab\";\nimport {\n  Divider,\n  Grid,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableRow,\n  TextField,\n  Typography,\n} from \"@mui/material\";\nimport { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport NotFound from \"../../app/errors/NotFound\";\nimport Loading from \"../../app/layout/Loading\";\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\nimport {\n  addBasketItemAsync,\n  removeBasketItemAsync,\n} from \"../basket/basketSlice\";\nimport { fetchProductAsync, productSelectors } from \"./catalogSlice\";\n\nconst ProductDetails = () => {\n  const { basket, status } = useAppSelector((state) => state.basket);\n  const { status: productStatus } = useAppSelector((state) => state.catalog);\n\n  const dispatch = useAppDispatch();\n\n  const { id } = useParams() as { id: string };\n\n  const product = useAppSelector((state) =>\n    productSelectors.selectById(state, id)\n  );\n\n  const [quantity, setQuantity] = useState(0);\n\n  const item = basket?.items.find((i) => i.productId === product?.id);\n\n  const handleOnQuantityChange = (event: any) => {\n    let quantityVal = parseInt(event.target.value);\n    if (quantityVal >= 0) {\n      setQuantity(quantityVal);\n    }\n  };\n\n  const handleAddOrUpdateCart = () => {\n    if (!item || quantity > item.quantity) {\n      let updatedQuantity = item ? quantity - item.quantity : quantity;\n      dispatch(\n        addBasketItemAsync({\n          productId: item?.productId!,\n          quantity: updatedQuantity,\n        })\n      );\n    } else {\n      let updatedQuantity = item.quantity - quantity;\n      dispatch(\n        removeBasketItemAsync({\n          productId: item.productId,\n          quantity: updatedQuantity,\n        })\n      );\n    }\n  };\n\n  useEffect(() => {\n    if (item) {\n      setQuantity(item.quantity);\n    }\n    if (!product) {\n      dispatch(fetchProductAsync(parseInt(id)));\n    }\n  }, [id, item, dispatch, product]);\n  if (productStatus === \"pendingFethProduct\")\n    return <Loading message='Loading product...' />;\n  if (!product) return <NotFound />;\n  return (\n    <Grid container spacing={6}>\n      <Grid item sm={6} xs={12}>\n        <img\n          src={product.pictureUrl}\n          alt={product.name}\n          style={{ width: \"100%\" }}\n        />\n      </Grid>\n      <Grid item sm={6} xs={12}>\n        <Typography variant='h3'>{product.name}</Typography>\n        <Divider sx={{ mb: 2 }} />\n        <Typography variant='h4' color='secondary'>\n          $ {(product.price / 100).toFixed(2)}\n        </Typography>\n        <TableContainer>\n          <Table>\n            <TableBody>\n              <TableRow>\n                <TableCell>Name</TableCell>\n                <TableCell>{product.name}</TableCell>\n              </TableRow>\n              <TableRow>\n                <TableCell>Description</TableCell>\n                <TableCell>{product.description}</TableCell>\n              </TableRow>\n              <TableRow>\n                <TableCell>Type</TableCell>\n                <TableCell>{product.type}</TableCell>\n              </TableRow>\n              <TableRow>\n                <TableCell>Brand</TableCell>\n                <TableCell>{product.brand}</TableCell>\n              </TableRow>\n              <TableRow>\n                <TableCell>Quantity in Stock</TableCell>\n                <TableCell>{product.quantityInStock}</TableCell>\n              </TableRow>\n            </TableBody>\n          </Table>\n        </TableContainer>\n        <Grid container spacing={2}>\n          <Grid item sm={6} xs={12}>\n            <TextField\n              variant='outlined'\n              type='number'\n              label='Quantity in cart'\n              fullWidth\n              value={quantity}\n              onChange={handleOnQuantityChange}\n            />\n          </Grid>\n          <Grid item sm={6} xs={12}>\n            <LoadingButton\n              disabled={\n                item?.quantity === quantity || (!item && quantity === 0)\n              }\n              loading={status.includes(\"pending\")}\n              sx={{ height: \"55px\" }}\n              color='primary'\n              size='large'\n              variant='contained'\n              fullWidth\n              onClick={handleAddOrUpdateCart}\n            >\n              {item ? \"Update Quantity\" : \"Add to Cart\"}\n            </LoadingButton>\n          </Grid>\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default ProductDetails;\n","import { Button, ButtonGroup, Typography } from \"@mui/material\";\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\nimport { decrement, increment } from \"./CounterSlice\";\n// import { Decrement, Increment } from \"./counterReducer\";\n\ninterface Props {}\n\nconst Contact = (props: Props) => {\n  const { data, title } = useAppSelector((state) => state.counter);\n  const dispatch = useAppDispatch();\n  return (\n    <>\n      <Typography variant='h2'>{title}</Typography>\n      <Typography variant='h5'>Data: {data}</Typography>\n      <ButtonGroup>\n        <Button\n          onClick={() => dispatch(decrement(1))}\n          variant='contained'\n          color='error'\n        >\n          Decrement\n        </Button>\n        <Button\n          onClick={() => dispatch(increment(1))}\n          variant='contained'\n          color='primary'\n        >\n          Increment\n        </Button>\n        <Button\n          onClick={() => dispatch(increment(5))}\n          variant='contained'\n          color='secondary'\n        >\n          Increment By 5\n        </Button>\n      </ButtonGroup>\n    </>\n  );\n};\n\nexport default Contact;\n","import { Button, Menu, Fade, MenuItem } from \"@mui/material\";\nimport React from \"react\";\nimport { useNavigate } from \"react-router\";\nimport { Link } from \"react-router-dom\";\nimport { signOut } from \"../../features/account/accountSlice\";\nimport { clearBasket } from \"../../features/basket/basketSlice\";\nimport { useAppDispatch, useAppSelector } from \"../store/configureStore\";\nimport Avatar from \"@mui/material/Avatar\";\n\nconst SignedInMenu = () => {\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n  const { user } = useAppSelector((state) => state.account);\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const open = Boolean(anchorEl);\n  const handleClick = (event: any) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  function stringToColor(string: string) {\n    let hash = 0;\n    let i;\n\n    /* eslint-disable no-bitwise */\n    for (i = 0; i < string.length; i += 1) {\n      hash = string.charCodeAt(i) + ((hash << 5) - hash);\n    }\n\n    let color = \"#\";\n\n    for (i = 0; i < 3; i += 1) {\n      const value = (hash >> (i * 8)) & 0xff;\n      color += `00${value.toString(16)}`.substr(-2);\n    }\n    /* eslint-enable no-bitwise */\n\n    return color;\n  }\n\n  function stringAvatar(name: string | undefined) {\n    let nameStr = name ? name : \"\";\n\n    if (nameStr) {\n      if (nameStr.split(\" \").length > 1) {\n        return {\n          sx: {\n            bgcolor: stringToColor(nameStr),\n          },\n          children: `${nameStr.split(\" \")[0][0]}${nameStr.split(\" \")[1][0]}`,\n        };\n      } else {\n        return {\n          sx: {\n            bgcolor: stringToColor(nameStr),\n          },\n          children: `${nameStr.split(\" \")[0][0]}`,\n        };\n      }\n    }\n    return;\n  }\n\n  return (\n    <>\n      {user && (\n        <Button color='inherit' onClick={handleClick} sx={{ typography: \"h6\" }}>\n          <Avatar {...stringAvatar(user?.email)} />\n        </Button>\n      )}\n      <Menu\n        anchorEl={anchorEl}\n        open={open}\n        onClose={handleClose}\n        TransitionComponent={Fade}\n      >\n        <MenuItem onClick={handleClose}>Profile</MenuItem>\n        <MenuItem component={Link} to='/orders'>\n          My Orders\n        </MenuItem>\n        <MenuItem\n          onClick={() => {\n            dispatch(signOut());\n            dispatch(clearBasket());\n            navigate(\"/\");\n          }}\n        >\n          Logout\n        </MenuItem>\n      </Menu>\n    </>\n  );\n};\n\nexport default SignedInMenu;\n","import { ShoppingCart } from \"@mui/icons-material\";\nimport {\n  AppBar,\n  Badge,\n  Box,\n  IconButton,\n  List,\n  ListItemButton,\n  Switch,\n  Toolbar,\n  Typography,\n} from \"@mui/material\";\nimport { useState } from \"react\";\nimport { Link, NavLink } from \"react-router-dom\";\nimport { useAppSelector } from \"../store/configureStore\";\nimport SignedInMenu from \"./SignedInMenu\";\nimport Menu from \"@mui/material/Menu\";\nimport MenuIcon from \"@mui/icons-material/Menu\";\nimport Avatar from \"@mui/material/Avatar\";\nimport Tooltip from \"@mui/material/Tooltip\";\n\ninterface Props {\n  mode: boolean;\n  handleOnChange: (event: any) => void;\n}\nconst midLinks = [\n  {\n    title: \"catalog\",\n    path: \"/catalog\",\n  },\n  {\n    title: \"about\",\n    path: \"/about\",\n  },\n  {\n    title: \"contact\",\n    path: \"/contact\",\n  },\n];\n\nconst rightLinks = [\n  {\n    title: \"login\",\n    path: \"/login\",\n  },\n  {\n    title: \"register\",\n    path: \"/register\",\n  },\n];\n\nconst navStyles = {\n  color: \"inherit\",\n  textDecoration: \"none\",\n  typography: \"h6\",\n  \"&:hover\": {\n    color: \"grey.500\",\n  },\n  \"&.active\": {\n    color: \"text.secondary\",\n  },\n};\n\nconst Header = (props: Props) => {\n  const label = { inputProps: { \"aria-label\": \"Switch demo\" } };\n  const { basket } = useAppSelector((state) => state.basket);\n  const { user } = useAppSelector((state) => state.account);\n  const itemCount = basket?.items.reduce((sum, item) => sum + item.quantity, 0);\n\n  const [anchorElNav, setAnchorElNav] = useState(null);\n  const [anchorElUser, setAnchorElUser] = useState(null);\n\n  const handleOpenNavMenu = (event: any) => {\n    setAnchorElNav(event.currentTarget);\n  };\n  const handleOpenUserMenu = (event: any) => {\n    setAnchorElUser(event.currentTarget);\n  };\n\n  const handleCloseNavMenu = () => {\n    setAnchorElNav(null);\n  };\n\n  const handleCloseUserMenu = () => {\n    setAnchorElUser(null);\n  };\n\n  return (\n    <AppBar position='static'>\n      <Toolbar\n        sx={{\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          alignItems: \"center\",\n        }}\n      >\n        <Box sx={{ /*flexGrow: 1,*/ display: { xs: \"flex\", sm: \"none\" } }}>\n          <IconButton\n            size='large'\n            aria-label='account of current user'\n            aria-controls='menu-appbar'\n            aria-haspopup='true'\n            onClick={handleOpenNavMenu}\n            color='inherit'\n          >\n            <MenuIcon />\n          </IconButton>\n          <Menu\n            id='menu-appbar'\n            anchorEl={anchorElNav}\n            anchorOrigin={{\n              vertical: \"bottom\",\n              horizontal: \"left\",\n            }}\n            keepMounted\n            transformOrigin={{\n              vertical: \"top\",\n              horizontal: \"left\",\n            }}\n            open={Boolean(anchorElNav)}\n            onClose={handleCloseNavMenu}\n            sx={{\n              display: { xs: \"block\", sm: \"none\" },\n            }}\n          >\n            {midLinks.map(({ title, path }) => (\n              <ListItemButton\n                component={Link}\n                key={path}\n                to={path}\n                onClick={handleCloseNavMenu}\n              >\n                {title.toUpperCase()}\n              </ListItemButton>\n            ))}\n          </Menu>\n        </Box>\n\n        <Box sx={{ display: \"flex\", alignItems: \"center\" }}>\n          <Typography variant='h6' component={NavLink} to='/' sx={navStyles}>\n            RE-STORE\n          </Typography>\n          <Switch\n            {...label}\n            checked={props.mode}\n            color='default'\n            onChange={props.handleOnChange}\n          />\n        </Box>\n        <List\n          /*sx={{ display: \"flex\" }}*/ sx={{\n            // flexGrow: 1,\n            display: { xs: \"none\", sm: \"flex\" },\n          }}\n        >\n          {midLinks.map(({ title, path }) => (\n            <ListItemButton\n              component={NavLink}\n              to={path}\n              key={path}\n              sx={navStyles}\n            >\n              {title.toUpperCase()}\n            </ListItemButton>\n          ))}\n        </List>\n        <Box sx={{ display: \"flex\", alignItems: \"center\" }}>\n          <IconButton component={Link} to='/basket' sx={{ color: \"inherit\" }}>\n            <Badge badgeContent={itemCount} color='secondary'>\n              <ShoppingCart></ShoppingCart>\n              {/* <ShoppingCart */}\n            </Badge>\n          </IconButton>\n          {user ? (\n            <SignedInMenu />\n          ) : (\n            <List\n              // sx={{ display: \"flex\" }}\n              sx={{\n                flexGrow: 1,\n                display: { xs: \"none\", md: \"flex\" },\n              }}\n            >\n              {rightLinks.map(({ title, path }) => (\n                <ListItemButton\n                  component={NavLink}\n                  to={path}\n                  key={path}\n                  sx={navStyles}\n                >\n                  {title.toUpperCase()}\n                </ListItemButton>\n              ))}\n            </List>\n          )}\n        </Box>\n\n        <Box\n          // sx={{ flexGrow: 0 }}\n          sx={{ /*flexGrow: 1,*/ display: { xs: \"flex\", md: \"none\" } }}\n        >\n          {!user && (\n            <Tooltip title='Open settings'>\n              <IconButton onClick={handleOpenUserMenu} sx={{ p: 0 }}>\n                <Avatar src='/broken-image.jpg' />\n              </IconButton>\n            </Tooltip>\n          )}\n          <Menu\n            sx={{ mt: \"45px\" }}\n            id='menu-appbar'\n            anchorEl={anchorElUser}\n            anchorOrigin={{\n              vertical: \"top\",\n              horizontal: \"right\",\n            }}\n            keepMounted\n            transformOrigin={{\n              vertical: \"top\",\n              horizontal: \"right\",\n            }}\n            open={Boolean(anchorElUser)}\n            onClose={handleCloseUserMenu}\n          >\n            {user ? (\n              <SignedInMenu />\n            ) : (\n              <>\n                {rightLinks.map(({ title, path }) => (\n                  <ListItemButton\n                    component={NavLink}\n                    onClick={handleCloseUserMenu}\n                    to={path}\n                    key={path}\n                  >\n                    <Typography textAlign='center'>\n                      {title.toUpperCase()}\n                    </Typography>\n                  </ListItemButton>\n                ))}\n              </>\n            )}\n          </Menu>\n        </Box>\n      </Toolbar>\n    </AppBar>\n  );\n};\n\nexport default Header;\n","import { Button, Container, Divider, Paper, Typography } from \"@mui/material\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\n\ninterface Props {}\n\nconst ServerError = (props: Props) => {\n  const navigate = useNavigate();\n  const { state } = useLocation();\n  return (\n    <Container component={Paper}>\n      {state?.error ? (\n        <>\n          <Typography variant='h4' color='error' gutterBottom>\n            {state.error.title}\n          </Typography>\n          <Divider></Divider>\n          <Typography>\n            {state.error.detail || \"inernal server error\"}\n          </Typography>\n        </>\n      ) : (\n        <>\n          <Typography variant='h5' gutterBottom>\n            Server Error\n          </Typography>\n        </>\n      )}\n      <Button\n        onClick={() => {\n          navigate(\"/catalog\");\n        }}\n      >\n        Go back to the store\n      </Button>\n    </Container>\n  );\n};\n\nexport default ServerError;\n","import {\n  TableContainer,\n  Paper,\n  Table,\n  TableBody,\n  TableRow,\n  TableCell,\n} from \"@mui/material\";\nimport { formatCurrency } from \"../../app/util/util\";\n\ninterface Props {\n  subTotal: number;\n}\n\nexport default function BasketSummary({ subTotal }: Props) {\n  const deliveryFee = subTotal > 100 ? 0 : 5;\n\n  return (\n    <>\n      <TableContainer component={Paper} variant={\"outlined\"}>\n        <Table>\n          <TableBody>\n            <TableRow>\n              <TableCell colSpan={2}>Subtotal</TableCell>\n              <TableCell align='right'>\n                {formatCurrency(subTotal, false)}\n              </TableCell>\n            </TableRow>\n            <TableRow>\n              <TableCell colSpan={2}>Delivery fee*</TableCell>\n              <TableCell align='right'>\n                {formatCurrency(deliveryFee, false)}\n              </TableCell>\n            </TableRow>\n            <TableRow>\n              <TableCell colSpan={2}>Total</TableCell>\n              <TableCell align='right'>\n                {formatCurrency(subTotal + deliveryFee, false)}\n              </TableCell>\n            </TableRow>\n            <TableRow>\n              <TableCell>\n                <span style={{ fontStyle: \"italic\" }}>\n                  *Orders over $100 qualify for free delivery\n                </span>\n              </TableCell>\n            </TableRow>\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </>\n  );\n}\n","import { LoadingButton } from \"@material-ui/lab\";\nimport { Remove, Add, Delete } from \"@mui/icons-material\";\nimport {\n  TableContainer,\n  Paper,\n  Table,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableBody,\n  Box,\n} from \"@mui/material\";\nimport React from \"react\";\nimport { BasketItem } from \"../../app/models/basket\";\nimport { useAppSelector, useAppDispatch } from \"../../app/store/configureStore\";\nimport { removeBasketItemAsync, addBasketItemAsync } from \"./basketSlice\";\n\ninterface Props {\n  items: BasketItem[];\n  isBasket?: boolean;\n}\n\nconst BasketTable = ({ items, isBasket = true }: Props) => {\n  const { status } = useAppSelector((state) => state.basket);\n  const dispatch = useAppDispatch();\n  return (\n    <TableContainer component={Paper}>\n      <Table /*sx={{ minWidth: 650 }}*/ aria-label='simple table'>\n        <TableHead>\n          <TableRow>\n            <TableCell>Product</TableCell>\n            <TableCell align='right'>Price</TableCell>\n            <TableCell align='right'>Quantity</TableCell>\n            <TableCell align='right'>Subtotal</TableCell>\n            {isBasket && <TableCell align='right'></TableCell>}\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {items.map((item) => (\n            <TableRow\n              key={item.productId}\n              sx={{ \"&:last-child td, &:last-child th\": { border: 0 } }}\n            >\n              <TableCell component='th' scope='row'>\n                <Box display='flex' alignItems='center'>\n                  <img\n                    src={item.pictureUrl}\n                    alt={item.name}\n                    style={{ height: 50, marginRight: 20 }}\n                  />\n\n                  <span>{item.name}</span>\n                </Box>\n                {/* {item.name} */}\n              </TableCell>\n              <TableCell align='right'>\n                ${(item.price / 100).toFixed(2)}\n              </TableCell>\n              <TableCell align='right'>\n                {isBasket && (\n                  <LoadingButton\n                    loading={status.includes(\n                      \"pendingRemoveItem\" + item.productId + \"rem\"\n                    )}\n                    onClick={() =>\n                      dispatch(\n                        removeBasketItemAsync({\n                          productId: item.productId!,\n                          quantity: 1,\n                          name: \"rem\",\n                        })\n                      )\n                    }\n                    color='error'\n                  >\n                    <Remove />\n                  </LoadingButton>\n                )}\n                {item.quantity}\n                {isBasket && (\n                  <LoadingButton\n                    loading={status === \"pendingAddItem\" + item.productId}\n                    onClick={() =>\n                      dispatch(\n                        addBasketItemAsync({\n                          productId: item.productId,\n                          quantity: 1,\n                        })\n                      )\n                    }\n                    color='error'\n                  >\n                    <Add />\n                  </LoadingButton>\n                )}\n              </TableCell>\n              <TableCell align='right'>\n                ${((item.price / 100) * item.quantity).toFixed(2)}\n              </TableCell>\n              {isBasket && (\n                <TableCell align='right'>\n                  <LoadingButton\n                    color='error'\n                    loading={\n                      status === \"pendingRemoveItem\" + item.productId + \"del\"\n                    }\n                    onClick={() =>\n                      dispatch(\n                        removeBasketItemAsync({\n                          productId: item.productId!,\n                          quantity: item.quantity,\n                          name: \"del\",\n                        })\n                      )\n                    }\n                  >\n                    <Delete />\n                  </LoadingButton>\n                </TableCell>\n              )}\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n};\n\nexport default BasketTable;\n","import { LoadingButton } from \"@material-ui/lab\";\nimport { Remove, Add, Delete } from \"@mui/icons-material\";\nimport { Paper, Box, Grid } from \"@mui/material\";\nimport { grey } from \"@mui/material/colors\";\nimport { BasketItem } from \"../../app/models/basket\";\nimport { useAppSelector, useAppDispatch } from \"../../app/store/configureStore\";\nimport { removeBasketItemAsync, addBasketItemAsync } from \"./basketSlice\";\n\ninterface Props {\n  items: BasketItem[];\n  isBasket?: boolean;\n}\n\nconst BasketTable = ({ items, isBasket = true }: Props) => {\n  const { status } = useAppSelector((state) => state.basket);\n  const dispatch = useAppDispatch();\n\n  return (\n    <>\n      {items.map((item) => (\n        <Grid container component={Paper}>\n          <Grid item xs={9}>\n            <Box display='flex' alignItems='center'>\n              <img\n                src={item.pictureUrl}\n                alt={item.name}\n                style={{ height: 50, marginRight: 20 }}\n              />\n\n              <span>{item.name}</span>\n            </Box>\n          </Grid>\n          <Grid item xs={3}>\n            <Box display='flex' alignItems='center' sx={{ mt: 2 }}>\n              ${(item.price / 100).toFixed(2)}\n            </Box>\n          </Grid>\n          <Grid item xs={6} sx={{ borderBottom: 1, borderColor: \"lightgrey\" }}>\n            <Box display='flex' alignItems='center'>\n              {isBasket && (\n                <LoadingButton\n                  loading={status.includes(\n                    \"pendingRemoveItem\" + item.productId + \"rem\"\n                  )}\n                  onClick={() =>\n                    dispatch(\n                      removeBasketItemAsync({\n                        productId: item.productId!,\n                        quantity: 1,\n                        name: \"rem\",\n                      })\n                    )\n                  }\n                  color='error'\n                >\n                  <Remove />\n                </LoadingButton>\n              )}\n              {item.quantity}\n              {isBasket && (\n                <LoadingButton\n                  loading={status === \"pendingAddItem\" + item.productId}\n                  onClick={() =>\n                    dispatch(\n                      addBasketItemAsync({\n                        productId: item.productId,\n                        quantity: 1,\n                      })\n                    )\n                  }\n                  color='error'\n                >\n                  <Add />\n                </LoadingButton>\n              )}\n            </Box>\n          </Grid>\n          <Grid item xs={3} sx={{ borderBottom: 1, borderColor: \"lightgrey\" }}>\n            <Box display='flex' alignItems='center' sx={{ mt: 1 }}>\n              ${((item.price / 100) * item.quantity).toFixed(2)}\n            </Box>\n          </Grid>\n          <Grid item xs={3} sx={{ borderBottom: 1, borderColor: \"lightgrey\" }}>\n            {isBasket && (\n              <LoadingButton\n                color='error'\n                loading={\n                  status === \"pendingRemoveItem\" + item.productId + \"del\"\n                }\n                onClick={() =>\n                  dispatch(\n                    removeBasketItemAsync({\n                      productId: item.productId!,\n                      quantity: item.quantity,\n                      name: \"del\",\n                    })\n                  )\n                }\n              >\n                <Delete />\n              </LoadingButton>\n            )}\n          </Grid>\n        </Grid>\n      ))}\n    </>\n  );\n};\n\nexport default BasketTable;\n","import { Button, Grid, Typography } from \"@mui/material\";\nimport { useState, useEffect } from \"react\";\n\nimport { Link } from \"react-router-dom\";\nimport { useAppSelector } from \"../../app/store/configureStore\";\nimport { convertPrice } from \"../../app/util/util\";\nimport BasketSummary from \"./BasketSummary\";\nimport BasketTable from \"./BasketTable\";\nimport BasketTableSM from \"./BasketTableSM\";\n\nfunction getWindowDimensions() {\n  const { innerWidth: width, innerHeight: height } = window;\n  return {\n    width,\n    height,\n  };\n}\nconst BasketPage = () => {\n  const { basket } = useAppSelector((state) => state.basket);\n  const [windowDimensions, setWindowDimensions] = useState(\n    getWindowDimensions()\n  );\n\n  const [isSMVersion, setIsSMVersion] = useState(false);\n\n  useEffect(() => {\n    if (windowDimensions.width < 600) {\n      setIsSMVersion(true);\n    } else {\n      setIsSMVersion(false);\n    }\n  }, [setIsSMVersion, windowDimensions.width]);\n\n  if (!basket)\n    return <Typography variant='h3'>Your basket is empty.</Typography>;\n\n  const subTotal =\n    basket.items.reduce(\n      (sum, item) => sum + convertPrice(item.price) * item.quantity,\n      0\n    ) ?? 0;\n  \n  return (\n    <>\n      {isSMVersion ? (\n        <BasketTableSM items={basket.items} />\n      ) : (\n        <BasketTable items={basket.items} />\n      )}\n      <Grid container>\n        <Grid item sm={6} xs={0} />\n        <Grid item sm={6} xs={12}>\n          <BasketSummary subTotal={subTotal} />\n          <Button\n            component={Link}\n            to='/checkout'\n            variant='contained'\n            size='large'\n            fullWidth\n          >\n            CheckOut\n          </Button>\n        </Grid>\n      </Grid>\n    </>\n  );\n};\n\nexport default BasketPage;\n","import { TextField } from \"@mui/material\";\nimport { useController, UseControllerProps } from \"react-hook-form\";\n\ninterface Props extends UseControllerProps {\n  label: string;\n}\n\nconst AppTextInput = (props: Props) => {\n  const { fieldState, field } = useController({ ...props, defaultValue: \"\" });\n  return (\n    <TextField\n      {...props}\n      {...field}\n      fullWidth\n      variant='outlined'\n      error={!!fieldState.error}\n      helperText={fieldState.error?.message}\n    />\n  );\n};\n\nexport default AppTextInput;\n","import { Checkbox, FormControlLabel } from \"@mui/material\";\nimport React from \"react\";\nimport { useController, UseControllerProps } from \"react-hook-form\";\n\ninterface Props extends UseControllerProps {\n  label: string;\n  disabled: boolean;\n}\n\nconst AppCheckbox = (props: Props) => {\n  const { field } = useController({ ...props, defaultValue: false });\n  return (\n    <FormControlLabel\n      control={\n        <Checkbox\n          {...field}\n          checked={field.value}\n          color='secondary'\n          disabled={props.disabled}\n        />\n      }\n      label={props.label}\n    />\n  );\n};\n\nexport default AppCheckbox;\n","import Grid from \"@mui/material/Grid\";\nimport Typography from \"@mui/material/Typography\";\nimport AppTextInput from \"../../app/components/AppTextInput\";\nimport { useFormContext } from \"react-hook-form\";\nimport AppCheckbox from \"../../app/components/AppCheckbox\";\n\nexport default function AddressForm() {\n  const { control, formState } = useFormContext();\n  return (\n    <>\n      <Typography variant='h6' gutterBottom>\n        Shipping address\n      </Typography>\n\n      <Grid container spacing={3}>\n        <Grid item xs={12} sm={12}>\n          <AppTextInput control={control} name='fullName' label='Full name' />\n        </Grid>\n        <Grid item xs={12}>\n          <AppTextInput control={control} name='address1' label='Address 1' />\n        </Grid>\n        <Grid item xs={12}>\n          <AppTextInput control={control} name='address2' label='Address 2' />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <AppTextInput control={control} name='city' label='City' />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <AppTextInput control={control} name='state' label='State' />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <AppTextInput control={control} name='zip' label='Zip' />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <AppTextInput control={control} name='country' label='Country' />\n        </Grid>\n        <Grid item xs={12}>\n          {/* <FormControlLabel\n            control={\n              <Checkbox color='secondary' name='saveAddress' value='yes' />\n            }\n            label='Use this address for payment details'\n          /> */}\n          <AppCheckbox\n            disabled={!formState.isDirty}\n            name='saveAddress'\n            label='Save this as the default address'\n            control={control}\n          />\n        </Grid>\n      </Grid>\n    </>\n  );\n}\n","import { InputBaseComponentProps } from \"@mui/material\";\nimport { forwardRef, Ref, useImperativeHandle, useRef } from \"react\";\n\ninterface Props extends InputBaseComponentProps {}\n\n// const stripeInput= ({ component: Component, ...props }: Props,\n//     ref: Ref<unknown>\n//   ) => {\n//     const elementRef = useRef<any>('');\n//     }\n\nexport const StripeInput = forwardRef(function StripeInput(\n  { component: Component, ...props }: Props,\n  ref: Ref<unknown>\n) {\n  const elementRef = useRef<any>();\n \n  useImperativeHandle(ref, () => ({\n    focus: () => elementRef.current.focus,\n  }));\n\n  return (\n    <Component\n      onReady={(element: any) => (elementRef.current = element)}\n      {...props}\n    />\n  );\n});\n\n// export default StripeInput\n","import Typography from \"@mui/material/Typography\";\nimport Grid from \"@mui/material/Grid\";\nimport TextField from \"@mui/material/TextField\";\nimport { useFormContext } from \"react-hook-form\";\nimport AppTextInput from \"../../app/components/AppTextInput\";\nimport {\n  CardCvcElement,\n  CardExpiryElement,\n  CardNumberElement,\n} from \"@stripe/react-stripe-js\";\nimport { StripeInput } from \"./StripeInput\";\nimport { StripeElementType } from \"@stripe/stripe-js\";\n\ninterface Props {\n  onCardInputChange: (event: any) => void;\n  cardState: {\n    elementError: { [key in StripeElementType]?: string };\n  };\n}\n\nexport default function PaymentForm({ onCardInputChange, cardState }: Props) {\n  const { control } = useFormContext();\n\n  return (\n    <>\n      <Typography variant='h6' gutterBottom>\n        Payment method\n      </Typography>\n      <Grid container spacing={3}>\n        <Grid item xs={12} md={6}>\n          <AppTextInput\n            name='nameOnCard'\n            label='Name on card'\n            control={control}\n          />\n        </Grid>\n        <Grid item xs={12} md={6}>\n          <TextField\n            onChange={onCardInputChange}\n            error={!!cardState.elementError.cardNumber}\n            helperText={cardState.elementError.cardNumber}\n            id='cardNumber'\n            label='Card number'\n            fullWidth\n            autoComplete='cc-number'\n            variant='outlined'\n            InputLabelProps={{ shrink: true }}\n            InputProps={{\n              inputComponent: StripeInput,\n              inputProps: {\n                component: CardNumberElement,\n              },\n            }}\n          />\n        </Grid>\n        <Grid item xs={12} md={6}>\n          <TextField\n            onChange={onCardInputChange}\n            error={!!cardState.elementError.cardExpiry}\n            helperText={cardState.elementError.cardExpiry}\n            id='expDate'\n            label='Expiry date'\n            fullWidth\n            autoComplete='cc-exp'\n            variant='outlined'\n            InputLabelProps={{ shrink: true }}\n            InputProps={{\n              inputComponent: StripeInput,\n              inputProps: {\n                component: CardExpiryElement,\n              },\n            }}\n          />\n        </Grid>\n        <Grid item xs={12} md={6}>\n          <TextField\n            onChange={onCardInputChange}\n            error={!!cardState.elementError.cardCvc}\n            helperText={cardState.elementError.cardCvc}\n            id='cvv'\n            label='CVV'\n            fullWidth\n            autoComplete='cc-csc'\n            variant='outlined'\n            InputLabelProps={{ shrink: true }}\n            InputProps={{\n              inputComponent: StripeInput,\n              inputProps: {\n                component: CardCvcElement,\n              },\n            }}\n          />\n        </Grid>\n      </Grid>\n    </>\n  );\n}\n","import { Grid } from \"@mui/material\";\nimport Typography from \"@mui/material/Typography\";\nimport { useState, useEffect } from \"react\";\nimport { useAppSelector } from \"../../app/store/configureStore\";\nimport { convertPrice } from \"../../app/util/util\";\nimport BasketSummary from \"../basket/BasketSummary\";\nimport BasketTable from \"../basket/BasketTable\";\nimport BasketTableSM from \"../basket/BasketTableSM\";\n\nfunction getWindowDimensions() {\n  const { innerWidth: width, innerHeight: height } = window;\n  return {\n    width,\n    height,\n  };\n}\n\nexport default function Review() {\n  const { basket } = useAppSelector((state) => state.basket);\n  const subTotal =\n    basket?.items.reduce(\n      (sum, item) => sum + convertPrice(item.price) * item.quantity,\n      0\n    ) ?? 0;\n\n  const [windowDimensions, setWindowDimensions] = useState(\n    getWindowDimensions()\n  );\n\n  const [isSMVersion, setIsSMVersion] = useState(false);\n\n  useEffect(() => {\n    if (windowDimensions.width < 600) {\n      setIsSMVersion(true);\n    } else {\n      setIsSMVersion(false);\n    }\n  }, [setIsSMVersion, windowDimensions.width]);\n  return (\n    <>\n      <Typography variant='h6' gutterBottom>\n        Order summary\n      </Typography>\n      {basket && (\n        <>\n          {isSMVersion ? (\n            <BasketTableSM items={basket.items} isBasket={false} />\n          ) : (\n            <BasketTable items={basket.items} isBasket={false} />\n          )}\n\n          <Grid container>\n            <Grid item sm={6} xs={0} />\n            <Grid item sm={6} xs={12}>\n              <BasketSummary subTotal={subTotal} />\n            </Grid>\n          </Grid>\n        </>\n      )}\n    </>\n  );\n}\n","import * as yup from \"yup\";\n\nexport const validationSchema = [\n  yup.object({\n    fullName: yup.string().required(\"Full name is required.\"),\n    address1: yup.string().required(\"Address line 1 is required.\"),\n    address2: yup.string().required(),\n    city: yup.string().required(),\n    state: yup.string().required(),\n    zip: yup.string().required(),\n    country: yup.string().required(),\n  }),\n  yup.object(),\n  yup.object({\n    nameOnCard: yup.string().required(),\n  }),\n];\n","import {\n  Box,\n  Button,\n  Paper,\n  Step,\n  StepLabel,\n  Stepper,\n  Typography,\n} from \"@mui/material\";\nimport { useEffect, useState } from \"react\";\nimport { FieldValues, FormProvider, useForm } from \"react-hook-form\";\nimport AddressForm from \"./AddressForm\";\nimport PaymentForm from \"./PaymentForm\";\nimport Review from \"./Review\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport { validationSchema } from \"./checkoutValidation\";\nimport agent from \"../../app/api/agent\";\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\nimport { clearBasket } from \"../basket/basketSlice\";\nimport { LoadingButton } from \"@material-ui/lab\";\nimport { StripeElementType } from \"@stripe/stripe-js\";\nimport {\n  CardNumberElement,\n  useElements,\n  useStripe,\n} from \"@stripe/react-stripe-js\";\n\nconst steps = [\"Shipping address\", \"Review your order\", \"Payment details\"];\n\nexport default function CheckoutPage() {\n  const [activeStep, setActiveStep] = useState(0);\n  const [orderNumber, setOrderNumber] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const dispatch = useAppDispatch();\n\n  const [cardState, setCardState] = useState<{\n    elementError: { [key in StripeElementType]?: string };\n  }>({ elementError: {} });\n  const [cardComplete, setCardComplete] = useState<any>({\n    cardNumber: false,\n    cardExpiry: false,\n    cardCvc: false,\n  });\n\n  const [paymentMessage, setPaymentMessage] = useState(\"\");\n  const [paymentSucceeded, setpaymentSucceeded] = useState(false);\n  const basket = useAppSelector((state) => state.basket.basket);\n  const stripe = useStripe();\n  const elements = useElements();\n\n  const onCardInputChange = (event: any) => {\n    setCardState({\n      ...cardState,\n      elementError: {\n        ...cardState.elementError,\n        [event.elementType]: event.error?.message,\n      },\n    });\n    setCardComplete({ ...cardComplete, [event.elementType]: event.complete });\n  };\n\n  function getStepContent(step: number) {\n    switch (step) {\n      case 0:\n        return <AddressForm />;\n      case 1:\n        return <Review />;\n      case 2:\n        return (\n          <PaymentForm\n            cardState={cardState}\n            onCardInputChange={onCardInputChange}\n          />\n        );\n      default:\n        throw new Error(\"Unknown step\");\n    }\n  }\n\n  let currentValidationSchema = validationSchema[activeStep];\n  const methods = useForm({\n    mode: \"all\",\n    resolver: yupResolver(currentValidationSchema),\n  });\n\n  useEffect(() => {\n    agent.Account.fetchAddress().then((response) => {\n      if (response) {\n        methods.reset({\n          ...methods.getValues(),\n          ...response,\n          saveAddress: false,\n        });\n      }\n    });\n  }, [methods]);\n\n  const submitOrder = async (data: FieldValues) => {\n    setLoading(true);\n    const { nameOnCard, saveAddress, ...shippingAddress } = data;\n    if (!stripe || !elements) return; //Stripe is not ready\n    try {\n      const cardElement = elements.getElement(CardNumberElement);\n      const paymentResult = await stripe.confirmCardPayment(\n        basket?.clientSecret!,\n        {\n          payment_method: {\n            card: cardElement!,\n            billing_details: {\n              name: nameOnCard,\n            },\n          },\n        }\n      );\n      console.log(paymentResult);\n      if (paymentResult.paymentIntent?.status === \"succeeded\") {\n        const orderNo = await agent.Orders.create({\n          saveAddress,\n          shippingAddress,\n        });\n        setOrderNumber(orderNo);\n        setpaymentSucceeded(true);\n        setPaymentMessage(\"Thank you -  we had received your payment\");\n        setActiveStep(activeStep + 1);\n        dispatch(clearBasket());\n        setLoading(false);\n      } else {\n        setPaymentMessage(paymentResult.error?.message!);\n        setpaymentSucceeded(false);\n        setLoading(false);\n        setActiveStep(activeStep + 1);\n      }\n    } catch (error) {\n      console.log(error);\n      setLoading(false);\n    }\n  };\n\n  const handleNext = async (data: FieldValues) => {\n    if (activeStep === steps.length - 1) {\n      await submitOrder(data);\n    } else {\n      setActiveStep(activeStep + 1);\n    }\n  };\n\n  const handleBack = () => {\n    setActiveStep(activeStep - 1);\n  };\n\n  const submitDisabled = (): boolean => {\n    if (activeStep === steps.length - 1) {\n      return (\n        !cardComplete.cardCvc ||\n        !cardComplete.cardExpiry ||\n        !cardComplete.cardNumber ||\n        !methods.formState.isValid\n      );\n    }\n    return !methods.formState.isValid;\n  };\n\n  return (\n    <FormProvider {...methods}>\n      <Paper\n        variant='outlined'\n        sx={{ my: { xs: 3, md: 6 }, p: { xs: 2, md: 3 } }}\n      >\n        <Typography component='h1' variant='h4' align='center'>\n          Checkout\n        </Typography>\n        <Stepper activeStep={activeStep} sx={{ pt: 3, pb: 5 }}>\n          {steps.map((label) => (\n            <Step key={label}>\n              <StepLabel>{label}</StepLabel>\n            </Step>\n          ))}\n        </Stepper>\n        <>\n          {activeStep === steps.length ? (\n            <>\n              <Typography variant='h5' gutterBottom>\n                {paymentMessage}\n              </Typography>\n              {paymentSucceeded ? (\n                <Typography variant='subtitle1'>\n                  Your order number is #{orderNumber}. We have not emailed your\n                  order confirmation, and will not send you an update when your\n                  order has shipped as this is a fake store!\n                </Typography>\n              ) : (\n                <Button variant='contained' onClick={handleBack}>\n                  Go back and try again\n                </Button>\n              )}\n            </>\n          ) : (\n            <form onSubmit={methods.handleSubmit(handleNext)}>\n              {getStepContent(activeStep)}\n              <Box sx={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n                {activeStep !== 0 && (\n                  <Button onClick={handleBack} sx={{ mt: 3, ml: 1 }}>\n                    Back\n                  </Button>\n                )}\n                <LoadingButton\n                  loading={loading}\n                  disabled={submitDisabled()}\n                  variant='contained'\n                  type='submit'\n                  sx={{ mt: 3, ml: 1 }}\n                >\n                  {activeStep === steps.length - 1 ? \"Place order\" : \"Next\"}\n                </LoadingButton>\n              </Box>\n            </form>\n          )}\n        </>\n      </Paper>\n    </FormProvider>\n  );\n}\n","import { Elements } from \"@stripe/react-stripe-js\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport React, { useEffect, useState } from \"react\";\nimport agent from \"../../app/api/agent\";\nimport Loading from \"../../app/layout/Loading\";\nimport { useAppDispatch } from \"../../app/store/configureStore\";\nimport { setBasket } from \"../basket/basketSlice\";\nimport CheckoutPage from \"./CheckoutPage\";\n\ninterface Props {}\nconst stripePromise = loadStripe(\n  // \"pk_test_51KOj4eSAUhJrQ47KASfHM2BLXOp37slGvYFQ4GbAr149AbkIyq70IWYFGNFXzvogY4PuF2G9Szvi6a4PNSbe09QN00tCNtgObu\"\n  \"pk_test_51KQ5elGfuNYhhn0zWdfGNMYmaewuZds9FKCc4YPuKeQq9vVcR6v6dbHrbBL4hPbaGVPDrNydYu7iDycGvjpRwzX400kvBS0Fnh\"\n);\nconst CheckoutWrapper = (props: Props) => {\n  const dispatch = useAppDispatch();\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    agent.Payments.createPaymentIntent()\n      .then((basket) => dispatch(setBasket(basket)))\n      .catch((error) => console.log(error))\n      .finally(() => setLoading(false));\n  }, [dispatch]);\n\n  if (loading) return <Loading message='Loading checkout...' />;\n\n  return (\n    <Elements stripe={stripePromise}>\n      <CheckoutPage />\n    </Elements>\n  );\n};\n\nexport default CheckoutWrapper;\n","import Avatar from \"@mui/material/Avatar\";\nimport TextField from \"@mui/material/TextField\";\nimport Grid from \"@mui/material/Grid\";\nimport Box from \"@mui/material/Box\";\nimport LockOutlinedIcon from \"@mui/icons-material/LockOutlined\";\nimport Typography from \"@mui/material/Typography\";\nimport Container from \"@mui/material/Container\";\nimport { Paper } from \"@mui/material\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport { LoadingButton } from \"@material-ui/lab\";\n\nimport agent from \"../../app/api/agent\";\nimport { toast } from \"react-toastify\";\n\nexport default function Register() {\n  const navigate = useNavigate();\n  // const [validationErrors, setValidationErrors] = useState([]);\n  const {\n    register,\n    handleSubmit,\n    formState: { isSubmitting, errors, isValid },\n    setError,\n  } = useForm({ mode: \"all\" });\n\n  const handleApiErrors = (errors: any) => {\n    console.log(errors);\n    if (errors) {\n      errors.forEach((error: string) => {\n        if (error.includes(\"Password\")) {\n          setError(\"password\", { message: error });\n        } else if (error.includes(\"Email\")) {\n          setError(\"email\", { message: error });\n        } else if (error.includes(\"Username\")) {\n          setError(\"username\", { message: error });\n        }\n      });\n    }\n  };\n  return (\n    <Container\n      component={Paper}\n      maxWidth='sm'\n      sx={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        p: 4,\n      }}\n    >\n      <Avatar sx={{ m: 1, bgcolor: \"secondary.main\" }}>\n        <LockOutlinedIcon />\n      </Avatar>\n      <Typography component='h1' variant='h5'>\n        Register\n      </Typography>\n      <Box\n        component='form'\n        onSubmit={handleSubmit((data) =>\n          agent.Account.register(data)\n            .then(() => {\n              toast.success(\"Registration successful -  you can now login\");\n              navigate(\"/login\");\n            })\n            .catch((error) => handleApiErrors(error))\n        )}\n        noValidate\n        sx={{ mt: 1 }}\n      >\n        <TextField\n          margin='normal'\n          required\n          fullWidth\n          label='Username'\n          autoFocus\n          {...register(\"username\", { required: \"Username is required\" })}\n          error={!!errors.username}\n          helperText={errors?.username?.message}\n        />\n        <TextField\n          margin='normal'\n          required\n          fullWidth\n          label='Email Address'\n          {...register(\"email\", {\n            required: \"Email is required\",\n            pattern: {\n              value: /^\\w+[\\w-.]@*\\w+((-\\w+)|(\\w*))\\.[a-z]{2,3}$/,\n              message: \"Not a valid email.\",\n            },\n          })}\n          error={!!errors.email}\n          helperText={errors?.email?.message}\n        />\n        <TextField\n          margin='normal'\n          required\n          fullWidth\n          label='Password'\n          type='password'\n          {...register(\"password\", {\n            required: \"Password is required\",\n            pattern: {\n              value:\n                /(?=^.{6,10}$)(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&amp;*()_+}{&quot;:;'?/&gt;.&lt;,])(?!.*\\s).*$/,\n              message: \"Password does not meet complexity requirements.\",\n            },\n          })}\n          error={!!errors.password}\n          helperText={errors?.password?.message}\n        />\n        {/* {validationErrors.length > 0 && (\n          <Alert severity='error'>\n            <AlertTitle>Validation Errors</AlertTitle>\n            <List>\n              {validationErrors.map((error) => (\n                <ListItem key={error}>\n                  <ListItemText>{error}</ListItemText>\n                </ListItem>\n              ))}\n            </List>\n          </Alert>\n        )} */}\n        <LoadingButton\n          loading={isSubmitting}\n          type='submit'\n          fullWidth\n          variant='contained'\n          sx={{ mt: 3, mb: 2 }}\n          disabled={!isValid}\n        >\n          Register\n        </LoadingButton>\n        <Grid container>\n          <Grid item>\n            <Link to='/login'>{\"Already have an account? Sign In\"}</Link>\n          </Grid>\n        </Grid>\n      </Box>\n    </Container>\n  );\n}\n","import Avatar from \"@mui/material/Avatar\";\nimport TextField from \"@mui/material/TextField\";\nimport Grid from \"@mui/material/Grid\";\nimport Box from \"@mui/material/Box\";\nimport LockOutlinedIcon from \"@mui/icons-material/LockOutlined\";\nimport Typography from \"@mui/material/Typography\";\nimport Container from \"@mui/material/Container\";\nimport { Paper } from \"@mui/material\";\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\nimport { FieldValues, useForm } from \"react-hook-form\";\nimport { LoadingButton } from \"@material-ui/lab\";\n\nimport { signInUser } from \"./accountSlice\";\nimport { useAppDispatch } from \"../../app/store/configureStore\";\n\nexport default function Login() {\n  const navigate = useNavigate();\n  const dispatch = useAppDispatch();\n  const location = useLocation();\n  const {\n    register,\n    handleSubmit,\n    formState: { isSubmitting, errors, isValid },\n  } = useForm({ mode: \"all\" });\n\n  const submitForm = async (data: FieldValues) => {\n    try {\n      await dispatch(signInUser(data));\n      navigate(location.state?.from?.pathname || \"/catalog\");\n      // history.push(\"/catalog\");\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <Container\n      component={Paper}\n      maxWidth='sm'\n      sx={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        p: 4,\n      }}\n    >\n      <Avatar sx={{ m: 1, bgcolor: \"secondary.main\" }}>\n        <LockOutlinedIcon />\n      </Avatar>\n      <Typography component='h1' variant='h5'>\n        Sign in\n      </Typography>\n      <Box\n        component='form'\n        onSubmit={handleSubmit(submitForm)}\n        noValidate\n        sx={{ mt: 1 }}\n      >\n        <TextField\n          margin='normal'\n          required\n          fullWidth\n          label='Username'\n          autoFocus\n          {...register(\"username\", { required: \"Username is required\" })}\n          error={!!errors.username}\n          helperText={errors?.username?.message}\n        />\n        <TextField\n          margin='normal'\n          required\n          fullWidth\n          label='Password'\n          type='password'\n          {...register(\"password\", { required: \"Password is required\" })}\n          error={!!errors.password}\n          helperText={errors?.password?.message}\n        />\n\n        <LoadingButton\n          loading={isSubmitting}\n          type='submit'\n          fullWidth\n          variant='contained'\n          sx={{ mt: 3, mb: 2 }}\n          disabled={!isValid}\n        >\n          Sign In\n        </LoadingButton>\n        <Grid container>\n          <Grid item>\n            <Link to='/register'>{\"Don't have an account? Sign Up\"}</Link>\n          </Grid>\n        </Grid>\n      </Box>\n    </Container>\n  );\n}\n","import { Navigate, useLocation } from \"react-router-dom\";\nimport { useAppSelector } from \"../store/configureStore\";\n\nconst PrivateRoute = ({ children }: { children: JSX.Element }) => {\n  let { user } = useAppSelector((state) => state.account);\n  let location = useLocation();\n\n  if (!user) {\n    // Redirect them to the /login page, but save the current location they were\n    // trying to go to when they were redirected. This allows us to send them\n    // along to that page after they login, which is a nicer user experience\n    // than dropping them off on the home page.\n    return <Navigate to='/login' state={{ from: location }} replace />;\n  }\n\n  return children;\n};\n\nexport default PrivateRoute;\n","import { Typography, Grid, Button } from \"@mui/material\";\nimport BasketSummary from \"../basket/BasketSummary\";\nimport BasketTable from \"../basket/BasketTable\";\nimport BasketTableSM from \"../basket/BasketTableSM\";\n\nimport { Order } from \"../../app/models/order\";\nimport { BasketItem } from \"../../app/models/basket\";\nimport { convertPrice } from \"../../app/util/util\";\nimport { useState, useEffect } from \"react\";\n\ninterface Props {\n  order: Order;\n  setSelectedOrder: (id: number) => void;\n}\n\nfunction getWindowDimensions() {\n  const { innerWidth: width, innerHeight: height } = window;\n  return {\n    width,\n    height,\n  };\n}\n\nconst OrderDetails = ({ order, setSelectedOrder }: Props) => {\n  const subTotal =\n    order.orderItems.reduce(\n      (sum, item) => sum + convertPrice(item.price) * item.quantity,\n      0\n    ) ?? 0;\n\n  const [windowDimensions, setWindowDimensions] = useState(\n    getWindowDimensions()\n  );\n\n  const [isSMVersion, setIsSMVersion] = useState(false);\n\n  useEffect(() => {\n    if (windowDimensions.width < 600) {\n      setIsSMVersion(true);\n    } else {\n      setIsSMVersion(false);\n    }\n  }, [setIsSMVersion, windowDimensions.width]);\n\n  return (\n    <>\n      <Grid container>\n        {isSMVersion ? (\n          <>\n            <Grid item xs={7} sm={0}>\n              <Typography variant='h6' gutterBottom>\n                Order #{order.id} - {order.orderStatus}\n              </Typography>\n            </Grid>\n\n            <Grid item xs={5}>\n              <Button\n                variant='contained'\n                color='primary'\n                onClick={() => setSelectedOrder(0)}\n              >\n                Orders\n              </Button>\n            </Grid>\n          </>\n        ) : (\n          <>\n            <Grid item xs={0} sm={10}>\n              <Typography variant='h3' gutterBottom>\n                Order #{order.id} - {order.orderStatus}\n              </Typography>\n            </Grid>\n            <Grid item xs={2}>\n              <Button\n                variant='contained'\n                color='primary'\n                onClick={() => setSelectedOrder(0)}\n              >\n                Back to Orders\n              </Button>\n            </Grid>\n          </>\n        )}\n      </Grid>\n      {order && (\n        <>\n          {isSMVersion ? (\n            <BasketTableSM\n              items={order.orderItems as BasketItem[]}\n              isBasket={false}\n            />\n          ) : (\n            <BasketTable\n              items={order.orderItems as BasketItem[]}\n              isBasket={false}\n            />\n          )}\n\n          <Grid container>\n            <Grid item sm={6} xs={0} />\n            <Grid item sm={6} xs={12}>\n              <BasketSummary subTotal={subTotal} />\n            </Grid>\n          </Grid>\n        </>\n      )}\n    </>\n  );\n};\n\nexport default OrderDetails;\n","import Table from \"@mui/material/Table\";\nimport TableBody from \"@mui/material/TableBody\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableContainer from \"@mui/material/TableContainer\";\nimport TableHead from \"@mui/material/TableHead\";\nimport TableRow from \"@mui/material/TableRow\";\nimport Paper from \"@mui/material/Paper\";\nimport { useEffect, useState } from \"react\";\nimport agent from \"../../app/api/agent\";\nimport Loading from \"../../app/layout/Loading\";\nimport { Order } from \"../../app/models/order\";\nimport { Button } from \"@mui/material\";\nimport { formatCurrency } from \"../../app/util/util\";\nimport OrderDetails from \"./OrderDetails\";\n\nconst Orders = () => {\n  const [orders, setOrders] = useState<Order[] | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  const [selectedOrderNumber, setSelectedOrderNumber] = useState(0);\n\n  useEffect(() => {\n    setLoading(true);\n    agent.Orders.list()\n      .then((orders) => setOrders(orders))\n      .catch((error) => {\n        console.log(error);\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  }, []);\n\n  if (loading) return <Loading message='Loading Orders...' />;\n\n  if (selectedOrderNumber > 0)\n    return (\n      <OrderDetails\n        order={orders?.find((o) => o.id === selectedOrderNumber)!}\n        setSelectedOrder={setSelectedOrderNumber}\n      />\n    );\n\n  return (\n    <TableContainer component={Paper}>\n      <Table /*sx={{ minWidth: 650 }}*/ aria-label='simple table'>\n        <TableHead>\n          <TableRow>\n            <TableCell>Order Number</TableCell>\n            <TableCell align='right'>Total</TableCell>\n            <TableCell align='right'>Order Date</TableCell>\n            <TableCell align='right'>Order State</TableCell>\n            <TableCell align='right'></TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {orders?.map((order) => (\n            <TableRow\n              key={order.id}\n              sx={{ \"&:last-child td, &:last-child th\": { border: 0 } }}\n            >\n              <TableCell component='th' scope='row' style={{ width: 75 }}>\n                {order.id}\n              </TableCell>\n              <TableCell align='right' style={{ width: 75 }}>\n                {formatCurrency(order.total, true)}\n              </TableCell>\n              <TableCell align='right' style={{ width: 75 }}>\n                {order.orderDate.split(\"T\")[0]}\n              </TableCell>\n              <TableCell align='right' style={{ width: 75 }}>\n                {order.orderStatus}\n              </TableCell>\n              <TableCell align='right' style={{ width: 75 }}>\n                <Button onClick={() => setSelectedOrderNumber(order.id)}>\n                  View\n                </Button>\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n};\n\nexport default Orders;\n","import { Paper, Box, Typography } from \"@mui/material\";\nimport React from \"react\";\nimport Carousel from \"react-material-ui-carousel\";\n\ninterface Props {}\n\nconst HomePageCarousel = (props: Props) => {\n  var items = [\n    {\n      name: \"Random Name #1\",\n      description: \"Wait for the festival deals!\",\n      imgSrc: \"/images/hero1.jpg\",\n    },\n    {\n      name: \"Random Name #2\",\n      description: \"Clearance Sale - upto 50% discounts\",\n      imgSrc: \"/images/hero2.jpg\",\n    },\n    {\n      name: \"Random Name #3\",\n      description: \"Top Deals - on Boots\",\n      imgSrc: \"/images/hero3.jpg\",\n    },\n  ];\n\n  return (\n    <Carousel\n      navButtonsProps={{\n        // Change the colors and radius of the actual buttons. THIS STYLES BOTH BUTTONS\n        style: {\n          // backgroundColor: \"cornflowerblue\",\n          borderRadius: 0,\n        },\n      }}\n      navButtonsWrapperProps={{\n        // Move the buttons to the bottom. Unsetting top here to override default style.\n        style: {\n          bottom: \"0\",\n          top: \"unset\",\n        },\n      }}\n    >\n      {items.map((item, i) => (\n        <Item key={i} item={item} />\n      ))}\n    </Carousel>\n  );\n};\n\nfunction Item(props: any) {\n  return (\n    <>\n      <Paper>\n        <img\n          src={props.item.imgSrc}\n          alt='hero'\n          style={{ display: \"block\", width: \"100%\", height: 400 }}\n        />\n      </Paper>\n      <Box display='flex' justifyContent='center' sx={{ p: 4 }}>\n        <Typography variant='h4' gutterBottom textAlign='center'>\n          {props.item.description}\n        </Typography>\n      </Box>\n    </>\n  );\n}\n\nexport default HomePageCarousel;\n","import {\n  Container,\n  createTheme,\n  CssBaseline,\n  ThemeProvider,\n} from \"@mui/material\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport {\n  Navigate,\n  Route,\n  Routes,\n  useLocation,\n  useNavigate,\n} from \"react-router\";\n\nimport { ToastContainer } from \"react-toastify\";\nimport AboutPage from \"../../features/about/AboutPage\";\nimport Catalog from \"../../features/catalog/catalog\";\nimport ProductDetails from \"../../features/catalog/ProductDetails\";\nimport Contact from \"../../features/contact/Contact\";\nimport Header from \"./Header\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport ServerError from \"../errors/ServerError\";\nimport NotFound from \"../errors/NotFound\";\nimport BasketPage from \"../../features/basket/BasketPage\";\nimport Loading from \"./Loading\";\nimport CheckoutWrapper from \"../../features/checkout/CheckoutWrapper\";\nimport { useAppDispatch, useAppSelector } from \"../store/configureStore\";\nimport { fetchBasketAsync } from \"../../features/basket/basketSlice\";\n\nimport Register from \"../../features/account/Register\";\nimport Login from \"../../features/account/Login\";\nimport { fetchCurrentUser, setURL } from \"../../features/account/accountSlice\";\nimport PrivateRoute from \"./PrivateRoute\";\nimport Orders from \"../../features/Orders/Orders\";\nimport HomePageCarousel from \"../../features/home/HomePageCarousel\";\n\nfunction App() {\n  const dispatch = useAppDispatch();\n  const { isSessionExpired, redirectUrl } = useAppSelector(\n    (state) => state.account\n  );\n  const [loading, setLoading] = useState(true);\n  const [darkMode, setDarkMode] = useState(false);\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (\n      isSessionExpired &&\n      redirectUrl !== \"\" &&\n      location.pathname !== redirectUrl\n    ) {\n      let url = redirectUrl;\n      dispatch(setURL(\"\"));\n\n      navigate(url);\n    }\n  }, [dispatch, isSessionExpired, location.pathname, navigate, redirectUrl]);\n\n  const initApp = useCallback(async () => {\n    try {\n      await dispatch(fetchCurrentUser());\n      await dispatch(fetchBasketAsync());\n    } catch (error) {\n      console.log(error);\n    }\n  }, [dispatch]);\n\n  useEffect(() => {\n    initApp().then(() => setLoading(false));\n  }, [dispatch, initApp]);\n\n  const paletteType = darkMode ? \"dark\" : \"light\";\n  const theme = createTheme({\n    palette: {\n      mode: paletteType,\n      background: {\n        default: paletteType === \"light\" ? \"#eaeaea\" : \"#121212\",\n      },\n    },\n  });\n  const handleOnChange = (event: any) => {\n    setDarkMode(!darkMode);\n  };\n\n  if (loading) return <Loading message='Intializing app...' />;\n\n  return (\n    <ThemeProvider theme={theme}>\n      <ToastContainer position='bottom-right' hideProgressBar theme='colored' />\n      <CssBaseline />\n\n      <Header handleOnChange={handleOnChange} mode={darkMode} />\n      {location.pathname === \"/\" ? (\n        <Routes>\n          <Route path='/' element={<HomePageCarousel />} />\n        </Routes>\n      ) : (\n        <Container sx={{ mt: 4 }}>\n          <Routes>\n            {/* <Route path='/' element={<HomePage />} /> */}\n\n            <Route path='/catalog' element={<Catalog />} />\n            <Route path='/catalog/:id' element={<ProductDetails />} />\n            <Route path='/about' element={<AboutPage />} />\n            <Route path='/contact' element={<Contact />} />\n            <Route path='/server-error' element={<ServerError />} />\n            <Route path='/not-found' element={<NotFound />} />\n            <Route path='/basket' element={<BasketPage />} />\n            <Route\n              path='/checkout'\n              element={\n                <PrivateRoute>\n                  <CheckoutWrapper />\n                </PrivateRoute>\n              }\n            />\n            <Route\n              path='/Orders'\n              element={\n                <PrivateRoute>\n                  <Orders />\n                </PrivateRoute>\n              }\n            />\n            <Route path='/login' element={<Login />} />\n            <Route path='/register' element={<Register />} />\n            <Route path='*' element={<Navigate to='not-found' />} />\n          </Routes>\n        </Container>\n      )}\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { ReactNode } from \"react\";\nimport { useLayoutEffect, useState } from \"react\";\nimport { History } from \"history\";\nimport { Router } from \"react-router-dom\";\n\nexport interface BrowserRouterProps {\n  basename?: string;\n  children?: ReactNode;\n  history: History;\n}\nexport function HistoryRouter({\n  basename,\n  children,\n  history,\n}: BrowserRouterProps) {\n  let [state, setState] = useState({\n    action: history.action,\n    location: history.location,\n  });\n\n  useLayoutEffect(() => history.listen(setState), [history]);\n\n  return (\n    <Router\n      basename={basename}\n      children={children}\n      location={state.location}\n      navigationType={state.action}\n      navigator={history}\n    />\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./app/layout/styles.css\";\nimport App from \"./app/layout/App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { createBrowserHistory } from \"history\";\n\nimport { HistoryRouter } from \"./app/api/HistoryRouter\";\nimport { myHistory } from \"./app/api/history\";\n\nimport { Provider } from \"react-redux\";\nimport { store } from \"./app/store/configureStore\";\n\nexport const history = createBrowserHistory();\n\nReactDOM.render(\n  <React.StrictMode>\n    <HistoryRouter history={myHistory}>\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </HistoryRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}